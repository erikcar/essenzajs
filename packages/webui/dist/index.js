var essenzaui;(()=>{var __webpack_modules__={"../core/dist/index.js":module=>{eval('!function (n, e) {\n   true ? module.exports = e() : 0;\n}(self, () => (() => {\n  "use strict";\n\n  var __webpack_modules__ = {\n      "./src/Apix.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   Apix: () => (/* binding */ Apix)\\n/* harmony export */ });\\n/* harmony import */ var _channels_AxiosChannel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./channels/AxiosChannel */ "./src/channels/AxiosChannel.js");\\n/* harmony import */ var _channels_FetchChannel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./channels/FetchChannel */ "./src/channels/FetchChannel.js");\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./src/utils.js");\\n\\n\\n\\n//import postgreSql from \\\'./interpreters/ISql\\\';\\n\\n//Usa servizio ajax \\nconsole.log("****APIX****");\\n//Controllo se chiamata ad operazione è già in corso o in coda\\n//(per le chiamate da eseguire sync potrei anche dare possibilità di dare un riferimento dopo la quale essere eseguita)\\n//se non trova callID lo mette per ultimo oppure esegue in modo async\\n\\nvar call_queue = [];\\n//in questo caso è come se fosse un singleton\\nvar apix = function (channel, ecatch, retry) {\\n  this.channel = channel || new _channels_FetchChannel__WEBPACK_IMPORTED_MODULE_1__.fetchChannel();\\n  this.parser = null; //postgreSql;\\n  this.ecatch = ecatch;\\n  this.dataOp = "api/jdata";\\n  this.queryOp = "api/jquery";\\n  this.apiUrl = "api/";\\n  this.method = "post";\\n  if (typeof retry === \\\'undefined\\\') {\\n    retry = new callRetry(3, 500);\\n  }\\n  this.retry = retry;\\n  return this;\\n};\\nfunction callRetry(num, wait) {\\n  this.attempts = num;\\n  if (Array.isArray(wait)) {\\n    this.wait = wait;\\n  } else {\\n    this.wait = Array(num).fill(wait);\\n  }\\n  this.count = 0;\\n  this.onApply = null;\\n  this.canApply = er => this.count < this.attempts; // && er.type !== "RESPONSE";\\n  this.apply = async er => {\\n    await (0,_utils__WEBPACK_IMPORTED_MODULE_2__.sleep)(wait[++this.count]);\\n    if (this.onApply) {\\n      this.onApply(er);\\n    }\\n  };\\n  this.reset = () => this.count = 0;\\n}\\n\\n//TODO: Gestire [messaggi utente, progress, assicurarsi di liberare queue, come gestire promise di LOCK (await?)]\\napix.fn = apix.prototype = {\\n  call: function (op, data, opt) {\\n    console.log("APIX START CALL");\\n    opt = opt || {};\\n    opt.url = op;\\n    opt.data = data;\\n    console.log("APIX START CALL OPTION", opt);\\n    this.formatOption(opt);\\n\\n    //SE è sigleton ed è già in esecuzione DISCARD => restitusco direttamente errore di  Promise.reject({type: \\\'\\\'});\\n    // canExecute può essere [\\\'SINGLETON\\\', \\\'LOCK\\\', \\\'PARALLEL\\\'] ma PARALLEL implica che può fare la chiamata senza controlli quindi si lascia canExecute undefined\\n    if (opt.mode && !CanExecute(op, opt)) {\\n      if (opt.mode === \\\'SINGLETON\\\') {\\n        return Promise.reject({\\n          type: \\\'DISCARD\\\'\\n        });\\n      } else {\\n        //LOCK case => put ACTION in queue\\n        let callObj = {\\n          id: op,\\n          option: opt,\\n          resolve: null,\\n          reject: null\\n        };\\n        call_queue.push(callObj);\\n        opt.lock = true;\\n        return new Promise(function (resolve, reject) {\\n          callObj.resolve = resolve;\\n          callObj.reject = reject;\\n        });\\n      }\\n    }\\n\\n    // SE DEVO METTERE IN CODA COSA RESTITUISCO? un promise che aspetta il suo turno ed eventualmente ha un meccanismo per eliminarsi da coda dopo un certo timeout\\n    //Sarebbe ottimo uno scheduler simple and light\\n    let instance = this;\\n    opt.promise = new Promise(function (resolve, reject) {\\n      instance.rawCall(opt, resolve, reject);\\n    });\\n    return opt.promise;\\n  },\\n  callMany: function () {},\\n  syncCall: function () {},\\n  // Serve sol per canExecute di client Action (che non prevedono chiamate remote o async)\\n\\n  option: function () {\\n    return {\\n      method: this.method,\\n      channel: this.channel,\\n      parser: this.parser,\\n      dataOp: this.dataOp,\\n      apiUrl: this.apiUrl,\\n      queryOp: this.queryOp\\n    };\\n  },\\n  formatOption: function (opt) {\\n    let defaultOption = this.option();\\n    for (let key in defaultOption) {\\n      if (!opt.hasOwnProperty(key)) {\\n        opt[key] = defaultOption[key];\\n      }\\n    }\\n    opt.attempt = opt.attempt || 3;\\n\\n    //if(!opt.channel) { opt.channel = this.channel; }\\n    //if(!opt.parser) { opt.parser = this.parser; }\\n  },\\n\\n  rawCall: function (opt, resolve, reject) {\\n    let channel = opt.channel;\\n    let instance = this;\\n    console.log("APIX RAW CALL: ", opt);\\n    channel.send(opt).then(response => {\\n      //GESTIRE ACTION ON RESULT - FACCIO PRIMA O DOPO resolve? ovvero faccio eventuale chiamata prima che venga gestita?\\n      checkQueue(response.config);\\n      response.config.promise = null; //Si può? delete? non viene comunque liberata da axios?\\n      //Qui potrei fare gestione generale di MangaedError\\n      const data = response.data;\\n      if (data && data.hasOwnProperty("uidt") && data.uidt === "ERROR") {\\n        if (instance.onManagedError) instance.onManagedError(data);\\n        reject(data);\\n      } else {\\n        resolve({\\n          response: response,\\n          data: response.data,\\n          args: response.config.args,\\n          opt: response.config\\n        });\\n      }\\n    }).catch(function (error) {\\n      let retry = opt.retry || instance.retry;\\n      console.log(error, retry);\\n      const data = error.response?.data;\\n      if (error.type === "RESPONSE" && data && data.uidt === "ERROR") {\\n        if (instance.onManagedError) instance.onManagedError(data);\\n        reject(error);\\n      } else if (error.type !== "CALL" && retry && retry.canApply(error)) {\\n        console.log("TENTATIVO: ", retry.count);\\n        retry.apply(opt);\\n        instance.rawCall(opt, resolve, reject);\\n      } else {\\n        checkQueue(opt); //error.config);\\n        if (instance.onError) instance.onError(error);\\n        reject(error);\\n\\n        //Log to server error.message?\\n      }\\n    });\\n  }\\n};\\n\\nconst Apix = new apix();\\n//Potrei creare object o class Request con tutte le info per eseguire la call\\n//Da esportare, esiste caso in cui stessa op viene chiamata\\n/**\\r\\n *\\r\\n * @param {operation} op\\r\\n * @param {*Data to send} data\\r\\n * @param {*option of axios more args} opt\\r\\n */\\n\\n/*function progressWidth(evt) {\\r\\n  if (evt.lengthComputable) {\\r\\n    var percentComplete = evt.loaded / evt.total;\\r\\n    console.log(percentComplete);\\r\\n    $(".lbn-progress").css({\\r\\n      width: percentComplete * 100 + "%",\\r\\n    });\\r\\n  }\\r\\n}*/\\n\\nfunction CanExecute(id, config) {\\n  console.log("PASSA CanExecute: ", id);\\n  if (findCall(id) > -1 && (config.mode === \\\'SINGLETON\\\' || config.mode === \\\'LOCK\\\')) {\\n    return false;\\n  }\\n  return true;\\n}\\n\\n//be javascript in browser single thread would be safe index (not change) between findCall and remove\\nfunction checkQueue(config) {\\n  if (config.mode) {\\n    let index = findCall(config.url);\\n\\n    //Attenzione se faccio chiamata ad id dopo che ho eliminato potrei eseguire insieme così\\n    if (index > -1) {\\n      if (config.mode === \\\'LOCK\\\') {\\n        //DO el call esegue adesso chiamata AXIOS\\n        let call = call_queue[index];\\n        const opt = call.option;\\n        Apix.call(opt.url, opt.data, opt).then(result => call.resolve(result)).catch(reason => call.reject(reason));\\n      }\\n      call_queue.splice(index, 1);\\n    }\\n  }\\n}\\nfunction findCall(id) {\\n  /*\\r\\n  for (var i = 0; i < call_queue.length; i++) {\\r\\n   if (call_queue[i].id == id) {\\r\\n     return  i;\\r\\n   }\\r\\n  } return -1;*/\\n  return call_queue.findIndex(e => e.id = id);\\n}\\n\\n//# sourceURL=webpack://webground/./src/Apix.js?\');\n      },\n      "./src/channels/AxiosChannel.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   axiosChannel: () => (/* binding */ axiosChannel)\\n/* harmony export */ });\\n//const axios = require("axios");\\n\\n/**\\r\\n * Un channel deve restituire un promise con result o error. Il formato di result ed error sono quelli di axios,\\r\\n * quindi gli altri canali si devono adattare (adapter) a uesto formato.\\r\\n * @param {*} opt\\r\\n * @returns\\r\\n */\\n\\nfunction axiosChannel(baseUrl) {\\n  this.baseUrl = baseUrl;\\n  axios.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded";\\n  this.send = function (opt) {\\n    console.log("AXIOS CHANNEL SEND: ", opt.url);\\n    if (this.baseUrl) opt.baseUrl = this.baseUrl;\\n    if (opt.method === "post" && opt.data && !opt.excludeParams) {\\n      const params = new URLSearchParams();\\n      for (let key in opt.data) {\\n        params.append(key, opt.data[key]);\\n      }\\n      opt.data = params;\\n    }\\n    return new Promise(function (resolve, reject) {\\n      axios(opt).then(result => resolve(result)).catch(error => {\\n        if (error.response) {\\n          error.type = "RESPONSE";\\n        } else if (error.request) {\\n          error.type = "REQUEST";\\n        } else {\\n          error.type = "CALL";\\n        }\\n        reject(error);\\n      });\\n    });\\n  };\\n  this.addHeader = function (name, value) {\\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \\\'common\\\';\\n    axios.defaults.headers[method][name] = value;\\n  };\\n  this.setBaseurl = function (url) {\\n    axios.defaults.baseURL = url;\\n  };\\n}\\n\\n//# sourceURL=webpack://webground/./src/channels/AxiosChannel.js?\');\n      },\n      "./src/channels/FetchChannel.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   fetchChannel: () => (/* binding */ fetchChannel)\\n/* harmony export */ });\\nfunction fetchChannel(baseUrl) {\\n  this.baseURL = baseUrl;\\n  this.headers = {\\n    "Content-type": "application/x-www-form-urlencoded"\\n  }; //"application/json; charset=UTF-8"\\n\\n  this.send = function (opt) {\\n    const config = {\\n      method: opt.method,\\n      headers: this.headers\\n    };\\n    if (!opt.url.startsWith("http") && this.baseURL) opt.url = this.baseUrl + opt.url;\\n    if (opt.method === "post") {\\n      if (opt.data && !opt.excludeParams) {\\n        const params = new URLSearchParams();\\n        for (let key in opt.data) {\\n          params.append(key, opt.data[key]);\\n        }\\n        opt.data = params;\\n        //config.body = params;\\n      }\\n      //else???\\n      config.body = JSON.stringify(opt.data);\\n    }\\n    return new Promise(function (resolve, reject) {\\n      fetch(opt.url, config).then(response => {\\n        console.log(response);\\n        if (response.ok) {\\n          response.config = opt;\\n          response.data = response.json();\\n          resolve(response);\\n        } else {\\n          reject({\\n            response: response,\\n            type: "RESPONSE"\\n          });\\n        }\\n      }).catch(err => {\\n        console.log(err);\\n        err.tytpe = "REQUEST";\\n        reject(err);\\n      });\\n    });\\n  };\\n  this.addHeader = function (name, value) {\\n    this.headers[name] = value;\\n  };\\n  this.setBaseurl = function (url) {\\n    this.baseURL = url;\\n  };\\n}\\n\\n//# sourceURL=webpack://webground/./src/channels/FetchChannel.js?\');\n      },\n      "./src/code.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   Block: () => (/* binding */ Block),\\n/* harmony export */   Flow: () => (/* binding */ Flow),\\n/* harmony export */   Fragment: () => (/* binding */ Fragment),\\n/* harmony export */   Task: () => (/* binding */ Task)\\n/* harmony export */ });\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./src/utils.js");\\n\\nfunction ITask() {}\\nconst Task = {\\n  execute: function (task, info, data, key) {\\n    return task instanceof ITask ? task.execute(info, data, key) : task(info, data, key);\\n  }\\n};\\nfunction Fragment(name) {\\n  this.name = name;\\n  this.task;\\n  this.execute = function (info, data) {\\n    this.task && this.task(info, data);\\n  };\\n}\\nFragment.prototype = ITask.prototype;\\nfunction Block(task, key, data, next) {\\n  this.key = key;\\n  this.task = task;\\n  this.data = data;\\n  this.next = next;\\n  this.link = function (block) {\\n    this.next = block;\\n    return this;\\n  };\\n  this.execute = function (info) {\\n    info.base = this.base;\\n    this.task && (this.task instanceof ITask ? this.task.execute(info, this.data) : this.task(info, this.data));\\n  };\\n}\\nfunction Flow() {\\n  this.reset = function () {\\n    const sections = ["_last", "_output", "_after", "_task", "_before", "_input", "_start"];\\n    let actual;\\n    sections.forEach(section => {\\n      this[section] = new Block(null, section, null, actual);\\n      actual = this[section];\\n    });\\n    return this;\\n  };\\n  this.format = function (task, key, data, section) {\\n    section.next = task instanceof Block ? task.link(section.next) : new Block(task, key, data, section.next);\\n    return section.next;\\n  };\\n  this.task = function (task, key, data) {\\n    this._task = this.format(task, key, data, this._task);\\n    return this;\\n  };\\n  this.output = function (task, key, data) {\\n    this._output = this.format(task, key, data, this._output);\\n    return this;\\n  };\\n  this.input = function (task, key, data) {\\n    this._input = this.format(task, key, data, this._input);\\n    return this;\\n  };\\n  this.push = function (task, key, data, input) {\\n    input ? this.input(task, key, data) : this.output(task, key, data);\\n  };\\n  this.first = function (task, key, data) {\\n    this.format(task, key, data, this._first);\\n    return this;\\n  };\\n  this.last = function (task, key, data) {\\n    this._last = this.format(task, key, data, this._last);\\n    return this;\\n  };\\n  this.before = function (task, key, data) {\\n    this._before = this.format(task, key, data, this._before);\\n    return this;\\n  };\\n  this.after = function (task, key, data) {\\n    this.format(task, key, data, this._after);\\n    return this;\\n  };\\n  this.find = function (source, parent) {\\n    const predicate = _utils__WEBPACK_IMPORTED_MODULE_0__.$String.is(source) ? k => k === source : source;\\n    let block = this._start;\\n    while (block.next && !predicate(block.next.key)) block = block.next; //block.next.key !== key\\n    return parent ? block : block.next;\\n  };\\n  this.beforeOf = function (source, task, key, data) {\\n    const block = this.find(source, true);\\n    block && this.format(task, key, data, block);\\n    return this;\\n  };\\n  this.afterOf = function (source, task, key, data) {\\n    const block = this.find(source);\\n    block && this.format(task, key, data, block);\\n    return this;\\n  };\\n  this.override = function (target, task, key, data) {\\n    const parent = this.find(target, true);\\n    if (parent) {\\n      const block = parent.next;\\n      parent.next = block.next;\\n      task = this.format(task, key, data, parent);\\n      task.base = block;\\n    }\\n    return this;\\n  };\\n  this.remove = function (key) {\\n    const block = this.find(key, true);\\n    if (block) block.next = block.next.next;\\n    return this;\\n  };\\n  this.execute = function (info) {\\n    let block = this._start.next;\\n    while (block) {\\n      block.execute(info);\\n      block = block.next;\\n    }\\n  };\\n  this.reset();\\n}\\nFlow.prototype = ITask.prototype;\\n\\n//# sourceURL=webpack://webground/./src/code.js?\');\n      },\n      "./src/context.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   context: () => (/* binding */ context)\\n/* harmony export */ });\\n/* harmony import */ var _observe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./observe */ "./src/observe.js");\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./src/utils.js");\\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core */ "./src/core.js");\\n//import { core } from "./core";\\n\\n\\n\\nfunction context() {\\n  _observe__WEBPACK_IMPORTED_MODULE_0__.Observable.call(this);\\n  this.observe("MUTATED").make(_ref => {\\n    let {\\n      target,\\n      emitter\\n    } = _ref;\\n    emitter.mutation.push(target);\\n  });\\n  this.observe("IMMUTATED").make(_ref2 => {\\n    let {\\n      target,\\n      emitter\\n    } = _ref2;\\n    _utils__WEBPACK_IMPORTED_MODULE_1__.$Array.remove(emitter.mutation, m => m.id === target.id);\\n  });\\n  this.context = undefined;\\n  this.initialized = false;\\n  this.overridden = new Map();\\n}\\n_core__WEBPACK_IMPORTED_MODULE_2__.core.prototypeOf(_observe__WEBPACK_IMPORTED_MODULE_0__.Observable, context, {\\n  model: function (model, f) {\\n    f(this.overridden.has(model) ? new this.overridden.get(model)(this) : new model(this));\\n    //if(!m.istanceOfModel) throw new Error("MODEL call is not an istance of Model");\\n  },\\n\\n  getControl: function (control, target) {\\n    return this.overridden.has(control) ? new this.overridden.get(control)(this, target) : new control(this, target);\\n  },\\n  setControl: function (target, control) {\\n    return this.getControl(control, target);\\n  }\\n});\\n\\n/*export const webcontext = function (parent) {\\r\\n    Observable.call(this);\\r\\n\\r\\n    this.objects = [];\\r\\n    this.elements = {};\\r\\n\\r\\n    this.register = function (wo) {//, injection) {\\r\\n        this.objects.push(wo);\\r\\n        //injection && core.inject(null, injection);\\r\\n        //wo.context = this; // Siamo sicuri??\\r\\n    };\\r\\n\\r\\n    this.build = function (core) {\\r\\n\\r\\n        Object.defineProperty(webcontext.prototype, "document", {\\r\\n            get: function () {\\r\\n                return core.document;\\r\\n            },\\r\\n        });\\r\\n\\r\\n        Object.defineProperty(webcontext.prototype, "core", {\\r\\n            get: function () {\\r\\n                return core;\\r\\n            },\\r\\n        });\\r\\n\\r\\n        core.inject(webcontext, "IApi");\\r\\n\\r\\n        this.logged = core.getCookie(\\\'wgsession_\\\'); //use cookie Api\\r\\n        console.log("CTX LOGGED", this.logged);\\r\\n\\r\\n        this.session = useSession(this);\\r\\n        this.user = useUser(this);\\r\\n        const instance = this;\\r\\n        //session Active/Complete sia onReady che document.load )> \\r\\n        core.document.oncontent(function () {\\r\\n\\r\\n            ui.init();\\r\\n\\r\\n            if (!instance.initialized) {\\r\\n                //instance.session.contentReady(); //Mi assicuro di eliminare task, così anche se lo richiama ctx non eseguo di nuovo!\\r\\n                instance.init();\\r\\n            }\\r\\n        });\\r\\n    }\\r\\n\\r\\n    this.init = function () {\\r\\n        if (!this.initialized) {\\r\\n\\r\\n            this.initialized = true;\\r\\n            const instance = this;\\r\\n            const sync = [];\\r\\n\\r\\n            const ready = function (warning) {\\r\\n\\r\\n                if (!document.body) {\\r\\n                    return setTimeout(ready, 13, warning);\\r\\n                }\\r\\n\\r\\n                for (let k = 0; k < instance.objects.length; k++) {\\r\\n                    instance.objects[k].onready(instance, warning); //Session chiamerà prima onContent (se già eseguita non ci son più task)\\r\\n                }\\r\\n            }\\r\\n\\r\\n            const onReady = function (warning) {\\r\\n                console.log("CTX ON READY");\\r\\n                warning = warning || false;\\r\\n                document.onreadystatechange = () => {\\r\\n                    if (document.readyState === \\\'complete\\\') {\\r\\n                        ready(warning);\\r\\n                    }\\r\\n                };\\r\\n\\r\\n                if (document.readyState === \\\'complete\\\') {\\r\\n                    ready(warning);\\r\\n                }\\r\\n            }\\r\\n\\r\\n            this.document.onunload((evt) => { //Event wg unload can be call more time on some os architecture, TODO: handle in webground\\r\\n                instance.backup();\\r\\n            });\\r\\n\\r\\n            for (let k = 0; k < this.objects.length; k++) {\\r\\n                const wo = this.objects[k];\\r\\n                wo.init(this);\\r\\n                if (!wo.local && wo.syncronize)\\r\\n                    sync.push(wo.etype);\\r\\n            }\\r\\n\\r\\n            if (sync.length > 0) {\\r\\n                this.api.call("wg_sync", sync.join(\\\',\\\')).then((v) => {\\r\\n                    this.setData(v);\\r\\n                    onReady();\\r\\n                });\\r\\n            }\\r\\n            else {\\r\\n                onReady();\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    this.backup = function () {\\r\\n        for (let k = 0; k < this.objects.length; k++) {\\r\\n            this.objects[k].backup();\\r\\n        }\\r\\n    };\\r\\n\\r\\n    this.setData = function (data) {\\r\\n        let wo;\\r\\n        for (let k = 0; k < this.objects.length; k++) {\\r\\n            wo = this.objects[k];\\r\\n            if (data.hasOwnProperty(wo.etype))\\r\\n                wo.absorb(data[wo.etype]);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    this.model = function (model, f) {\\r\\n        const m = this.overridden.has(model) ? new this.overridden.get(model)(this) : new model(this);\\r\\n        //if(!m.istanceOfModel) throw new Error("MODEL call is not an istance of Model");\\r\\n        f(m);\\r\\n    }\\r\\n\\r\\n    this.getControl = function (control, target) {\\r\\n        return this.overridden.has(control) ? new this.overridden.get(control)(this, target) : new control(this, target);\\r\\n    }\\r\\n\\r\\n    this.setControl = function (target, control) {\\r\\n        target.control = this.getControl(control, target);\\r\\n        return target.control;\\r\\n    }\\r\\n\\r\\n    this.setControl(this, webControl);\\r\\n}*/\\n\\n//Essendo già cntext non assegno però se poi dovessi aggiungere altre proprietà ad Observable...\\n//webcontext.prototype = Observable.prototype;\\n\\n//# sourceURL=webpack://webground/./src/context.js?\');\n      },\n      "./src/core.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   Model: () => (/* binding */ Model),\\n/* harmony export */   VERSION: () => (/* binding */ VERSION),\\n/* harmony export */   __DEV__: () => (/* binding */ __DEV__),\\n/* harmony export */   core: () => (/* binding */ core),\\n/* harmony export */   deferredAction: () => (/* binding */ deferredAction),\\n/* harmony export */   donothing: () => (/* binding */ donothing),\\n/* harmony export */   localStore: () => (/* binding */ localStore),\\n/* harmony export */   sessionStore: () => (/* binding */ sessionStore),\\n/* harmony export */   waitAction: () => (/* binding */ waitAction)\\n/* harmony export */ });\\n/* harmony import */ var _Apix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Apix */ "./src/Apix.js");\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./src/utils.js");\\n\\n\\nconst VERSION = "1.0.0";\\nconst __DEV__ = true;\\nconst core = {\\n  built: false,\\n  getCookie: name => document.cookie.match(\\\'(^|;)\\\\\\\\s*\\\' + name + \\\'\\\\\\\\s*=\\\\\\\\s*([^;]+)\\\')?.pop() || null,\\n  document: {\\n    oncontent: function (f) {\\n      document.addEventListener("DOMContentLoaded", f);\\n    },\\n    onload: function (f) {\\n      window.addEventListener(\\\'onload\\\', f);\\n    },\\n    onunload: function (f) {\\n      document.addEventListener("visibilitychange", f);\\n      window.addEventListener("pagehide", f, false);\\n      document.addEventListener(\\\'beforeunload\\\', f);\\n    }\\n  },\\n  context: null,\\n  services: {\\n    iapi: _Apix__WEBPACK_IMPORTED_MODULE_0__.Apix\\n  },\\n  observableProperty: function (proto, key) {\\n    Object.defineProperty(proto, _utils__WEBPACK_IMPORTED_MODULE_1__.$String.capitalize(key), {\\n      get: function () {\\n        return this[key];\\n      },\\n      set: function (value) {\\n        this.mutate(key, value);\\n      }\\n    });\\n  },\\n  create: function (api) {\\n    if (__DEV__) {\\n      (!api || typeof api !== \\\'object\\\') && console.error("Wrong class api definition");\\n    }\\n    const constructor = api.$constructor || function () {};\\n    const proto = constructor.prototype;\\n    if (api.hasOwnProperty("$observable")) {\\n      for (const key in api.$observable) {\\n        this.observableProperty(proto, key);\\n        proto[key] = api.$observable[key];\\n      }\\n      delete api.$observable;\\n    }\\n    if (api.hasOwnProperty("$properties")) {\\n      Object.defineProperties(proto, api.$properties);\\n      delete api.$properties;\\n    }\\n    if (api.hasOwnProperty("$inject")) {\\n      core.inject(constructor, api.$inject);\\n      delete api.$inject;\\n    }\\n    Object.assign(proto, api);\\n    return constructor;\\n  },\\n  extend: function (base, api) {\\n    if (!api.hasOwnProperty("$constructor")) api.$constructor = function () {\\n      base.apply(this, arguments);\\n    };\\n    api.$constructor.prototype = Object.create(base.prototype);\\n    api.$constructor.prototype.constructor = api.$constructor;\\n    const constructor = this.create(api);\\n    return constructor;\\n  },\\n  prototypeOf: function (source, target, properties) {\\n    target.prototype = Object.create(source.prototype, {\\n      constructor: {\\n        value: target,\\n        enumerable: false,\\n        writable: true,\\n        configurable: true\\n      }\\n    });\\n    properties && Object.assign(target.prototype, properties);\\n    return target.prototype;\\n  },\\n  inject: function (type, services) {\\n    services = services.split(\\\',\\\');\\n    services.forEach(service => {\\n      service = service.trim().toLowerCase();\\n      Object.defineProperty(type.prototype, service.slice(1), {\\n        get: function () {\\n          return this.hasOwnProperty(service) ? this[service] : core.services[service];\\n        },\\n        set: function (value) {\\n          this[service] = value;\\n        }\\n      });\\n    });\\n  },\\n  build: function (ctx) {\\n    if (!this.built) {\\n      this.built = true;\\n      this.setContext(ctx);\\n    }\\n  },\\n  setContext: function (ctx) {\\n    this.context = ctx;\\n    this.services.icontext = ctx;\\n    ctx.build(this);\\n  }\\n};\\nconst donothing = () => undefined;\\nfunction Model(derived) {}\\ncore.inject(Model, "IApi");\\n\\n//should be Promise?\\nconst localStore = {\\n  save: function (wobj) {\\n    localStorage.setItem(wobj.etype + \\\'__\\\', JSON.stringify(wobj));\\n  },\\n  getData: function (wobj) {\\n    return JSON.parse(localStorage.getItem(wobj.etype + \\\'__\\\'));\\n  },\\n  clear: function (wobj) {\\n    return localStorage.removeItem(wobj.etype + \\\'__\\\');\\n  }\\n};\\nconst sessionStore = {\\n  save: function (wobj) {\\n    sessionStorage.setItem(wobj.etype + \\\'__\\\', JSON.stringify(wobj));\\n  },\\n  getData: function (wobj) {\\n    return JSON.parse(sessionStorage.getItem(wobj.etype + \\\'__\\\'));\\n  },\\n  clear: function (wobj) {\\n    return sessionStorage.removeItem(wobj.etype + \\\'__\\\');\\n  }\\n};\\nfunction deferredAction(action, offset) {\\n  if (!action) throw new Error("deferredAction must define action on constructor.");\\n  this.waiting = false;\\n  this.offset = offset || 500;\\n  this.timer = null;\\n  this.execute = function () {\\n    if (!this.waiting) {\\n      this.waiting = setTimeout((() => {\\n        this.waiting = false;\\n        action();\\n      }).bind(this), this.offset);\\n    }\\n  };\\n  this.setOffset = function (value) {\\n    this.offset = value;\\n    this.execute();\\n    /*if(this.waiting){\\r\\n        clearTimeout(this.waiting);\\r\\n        this.waiting = false;  \\r\\n    }*/\\n  };\\n}\\n\\nfunction waitAction(action, wait) {\\n  this.time = null;\\n  this.action = action;\\n  const instance = this;\\n  this.deferred = new deferredAction(() => {\\n    const noaction = new Date().getTime() - instance.time.getTime();\\n    const w = wait || 500;\\n    console.log("NO ACTION", noaction, w, w - w * 2 / 10);\\n    noaction > w - w * 2 / 10 ? instance.action() : instance.deferred.setOffset(w - noaction);\\n  }, wait || 500);\\n  this.execute = function () {\\n    this.time = new Date();\\n    this.deferred.execute();\\n  };\\n  this.executeNow = function () {\\n    this.action();\\n  };\\n}\\n\\n//# sourceURL=webpack://webground/./src/core.js?\');\n      },\n      "./src/data.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   $Data: () => (/* binding */ $Data),\\n/* harmony export */   DataCollection: () => (/* binding */ DataCollection),\\n/* harmony export */   DataObject: () => (/* binding */ DataObject),\\n/* harmony export */   MutableObject: () => (/* binding */ MutableObject),\\n/* harmony export */   Mutation: () => (/* binding */ Mutation)\\n/* harmony export */ });\\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ "./src/core.js");\\n/* harmony import */ var _graph__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graph */ "./src/graph.js");\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./src/utils.js");\\n\\n\\n\\nfunction MutableObject() {}\\nObject.defineProperty(MutableObject.prototype, "hasMutation", {\\n  get: function () {\\n    return this.__mutation !== undefined;\\n  }\\n});\\nObject.defineProperty(MutableObject.prototype, "mutation", {\\n  get: function () {\\n    if (!this.__mutation) Object.defineProperty(this, \\\'__mutation\\\', {\\n      enumerable: false,\\n      writable: true,\\n      value: new Mutation(this)\\n    });\\n    return this.__mutation;\\n  }\\n});\\nMutableObject.prototype.mutate = function (field, value) {\\n  this[field] !== value && this.mutation.setValue(field, value);\\n};\\nMutableObject.prototype.emit = function (event, data) {\\n  this.context.emit(event, data, this);\\n};\\n_core__WEBPACK_IMPORTED_MODULE_0__.core.inject(MutableObject, "IContext");\\nconst $DataObject = true;\\nfunction DataObject(etype, data) {\\n  this.$isDataObject = $DataObject;\\n  if (data) return $Data.cast(data, etype);\\n  MutableObject.call(this);\\n  // Per creare istanza type con new solo se data è null, altrimenti fare cast\\n  Object.defineProperty(this, \\\'_parent\\\', {\\n    enumerable: false,\\n    writable: true,\\n    value: etype ? $Data.createGraph(etype, false, "root").setSource(this) : null\\n  });\\n  Object.defineProperty(this, "parent", {\\n    get: function () {\\n      return Array.isArray(this._parent) ? this._parent.parent : this._parent;\\n    },\\n    set: function (value) {\\n      this._parent = value;\\n    }\\n  });\\n  Object.defineProperty(this, "managed", {\\n    get: function () {\\n      return !this.node.graph.unmanaged;\\n    }\\n  });\\n  this.observe = function (evt) {\\n    return this.node.observe(evt).target(this);\\n  };\\n  this.emit = function (evt, data) {\\n    this.node.emit(evt, data, this);\\n  };\\n  this.save = function () {\\n    this.node.save();\\n  };\\n}\\nDataObject.prototype = Object.create(MutableObject.prototype);\\nObject.defineProperty(DataObject.prototype, "node", {\\n  get: function () {\\n    return this._node ? this._node : this._parent.node;\\n  },\\n  set: function (value) {\\n    if (!this._node) Object.defineProperty(this, \\\'_node\\\', {\\n      enumerable: false,\\n      writable: true\\n    });\\n    this._node = value;\\n  }\\n});\\nfunction DataCollection(etype, source) {\\n  if (!source) source = [];\\n  if (!Array.isArray(source)) throw new Error("DataCollection: source must by Array Type");\\n  return $Data.cast(source, etype);\\n}\\nconst $Data = {\\n  cast: function (data, etype) {\\n    if (!data) return data;\\n    //Check if object => Warning or cast error // Check type by key\\n    return this.createGraph(etype, Array.isArray(data), "root").setSource(data).source;\\n  },\\n  createGraph: function (etype, collection, name) {\\n    return new _graph__WEBPACK_IMPORTED_MODULE_1__.Graph().parse(etype, collection, name);\\n  },\\n  build: function (data, node, parent) {\\n    return node.isCollection ? this.CreateCollection(data, parent, node) : this.CreateObject(data, parent, node);\\n  },\\n  CreateObject: function (data, parent, node) {\\n    Object.setPrototypeOf(data, node.type.prototype);\\n    data.parent = parent;\\n    data.node = node;\\n    node.deepFormat(data, parent);\\n    return data;\\n  },\\n  CreateCollection: function (data, parent, node) {\\n    data.$isDataObject = () => true;\\n    if (Array.isArray(data)) {\\n      for (let k = 0; k < data.length; k++) {\\n        data[k] = Object.setPrototypeOf(data[k], node.type.prototype);\\n        data[k].parent = this;\\n      }\\n    } else {\\n      data = [];\\n      parent[node.name] = data;\\n    }\\n    const parseArgs = function (args, start) {\\n      start = start || 0;\\n      let item;\\n      for (let i = start; i < args.length; i++) {\\n        item = args[i];\\n        if (!item) continue;\\n        if (!(item instanceof node.type)) args[i] = Object.setPrototypeOf(item, node.type.prototype);\\n        item.parent = this;\\n      }\\n    };\\n    const nativePush = Array.prototype.push;\\n    data.push = function () {\\n      parseArgs(arguments);\\n      nativePush.apply(this, arguments);\\n      //Node deepFormat and emit Add\\n    };\\n\\n    const nativeUnshift = Array.prototype.unshift;\\n    data.unshift = function () {\\n      parseArgs(arguments);\\n      nativeUnshift.apply(this, arguments);\\n    };\\n    const nativeSplice = Array.prototype.splice;\\n    data.splice = function () {\\n      parseArgs(arguments, 2);\\n      nativeSplice.apply(this, arguments);\\n    };\\n    Object.defineProperty(data, \\\'node\\\', {\\n      enumerable: false,\\n      value: node\\n    });\\n    Object.defineProperty(data, \\\'parent\\\', {\\n      enumerable: false,\\n      value: parent\\n    });\\n    node.deepFormat(data, parent);\\n    return data;\\n  },\\n  createProperty: function (target, name) {\\n    Object.defineProperty(target, name, {\\n      get: function () {\\n        return this[name];\\n      },\\n      set: function (value) {\\n        this.mutate(name, value);\\n      }\\n    });\\n  },\\n  createProperties: function (etype, eschema) {\\n    const schema = eschema[etype]; //core.EntitySchema[etype];\\n\\n    if (!schema || !schema.type) throw new Error(etype + ": Type or Schema definition missing.");\\n    for (let key in schema.fields) {\\n      //key = key.trim();\\n      Object.defineProperty(schema.type.prototype, _utils__WEBPACK_IMPORTED_MODULE_2__.$String.capitalize(key), {\\n        get: function () {\\n          return this[key];\\n        },\\n        set: function (value) {\\n          this.mutate(key, value);\\n        }\\n      });\\n    }\\n    schema.children && schema.children.forEach(info => {\\n      //const s = webground.EntitySchema[info.etype];\\n      const key = info.name;\\n      Object.defineProperty(schema.type.prototype, _utils__WEBPACK_IMPORTED_MODULE_2__.$String.capitalize(key), {\\n        get: function () {\\n          let child = this[key];\\n          if (info.collection && !child) {\\n            child = [];\\n            this[key] = child;\\n          }\\n          if (child && !child.hasOwnProperty("$isDataObject")) {\\n            this[key] = $Data.build(child, this.node.getChild(key), this);\\n            child = this[key];\\n          }\\n          return child;\\n        },\\n        set: function (value) {\\n          if (value && !value.hasOwnProperty("$isDataObject")) value = $Data.build(value, this.node.children[key], this);\\n          this[key] = value;\\n          //Emit Children Changed ???\\n        }\\n      });\\n    });\\n  },\\n\\n  buildSchema: function (eschema) {\\n    for (const key in eschema) {\\n      const schema = eschema[key];\\n      if (!schema.hasOwnProperty("type")) {\\n        schema.type = function () {\\n          DataObject.call(this);\\n        };\\n      }\\n      this.createProperties(key, eschema);\\n    }\\n  },\\n  hasType: obj => obj.hasOwnProperty("$isDataObject"),\\n  entities: {\\n    nextIndex: function (etype) {\\n      if (!this.entities[etype]) this.entities[etype] = 0;\\n      return this.entities[etype]--;\\n    }\\n  }\\n};\\nfunction Mutation(target, managed) {\\n  this.target = target;\\n  this.id = target.id;\\n  this.mutated = {};\\n\\n  //this.managed = managed === undefined ? !target.graph?.unmanaged : managed;\\n\\n  this.setValue = target.managed ? function (field, value) {\\n    if (this.original[field] === value) {\\n      delete this.mutated[field];\\n      if (--this.count === 0) {\\n        delete target.__mutation;\\n        ///target.immutable();\\n        target.emit("IMMUTATED", target, target);\\n      }\\n    } else {\\n      if (!this.original.hasOwnProperty(field)) {\\n        this.original[field] = target[field]; //value;\\n        this.count++;\\n        ithis.count === 1 && target.emit("MUTATED", target, target);\\n      }\\n      this.mutated[field] = value;\\n      this.target[field] = value;\\n      target.emit("MUTATING", {\\n        field,\\n        value,\\n        oldValue: this.original[field]\\n      }, target);\\n    }\\n  } : function (field, value) {\\n    this.mutated[field] = value;\\n    const oldValue = this.target[field];\\n    this.target[field] = value;\\n    target.emit("MUTATING", {\\n      field,\\n      value,\\n      oldValue: oldValue\\n    }, target);\\n  };\\n  this.restore = function () {\\n    if (this.managed) {\\n      for (const key in this.mutated) {\\n        this.target[key] = this.original[key];\\n      }\\n    }\\n  };\\n  target.__mutation = this;\\n  //target.mutable();\\n\\n  if (target.managed) {\\n    this.count = 0;\\n    this.original = {}; //Object.assign({}, target)\\n    //target.emit("MUTABLE", target);\\n  }\\n}\\n\\n/**\\r\\n * SELECT\\r\\n    column_name,\\r\\n    data_type\\r\\nFROM\\r\\n    information_schema.columns\\r\\nWHERE\\r\\n    table_name = \\\'table_name\\\';\\r\\n */\\n\\n//# sourceURL=webpack://webground/./src/data.js?\');\n      },\n      "./src/graph.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   BottomLink: () => (/* binding */ BottomLink),\\n/* harmony export */   DoubleLink: () => (/* binding */ DoubleLink),\\n/* harmony export */   FLOW_STOP: () => (/* binding */ FLOW_STOP),\\n/* harmony export */   Graph: () => (/* binding */ Graph),\\n/* harmony export */   GraphLink: () => (/* binding */ GraphLink),\\n/* harmony export */   GraphNode: () => (/* binding */ GraphNode),\\n/* harmony export */   Link: () => (/* binding */ Link),\\n/* harmony export */   TopLink: () => (/* binding */ TopLink)\\n/* harmony export */ });\\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ "./src/core.js");\\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ "./src/data.js");\\n/* harmony import */ var _observe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observe */ "./src/observe.js");\\n\\n\\n\\nfunction Graph() {\\n  Object.defineProperty(this, \\\'source\\\', {\\n    enumerable: false,\\n    writable: true\\n  });\\n\\n  /** @type {GraphNode} */\\n  Object.defineProperty(this, \\\'root\\\', {\\n    enumerable: false,\\n    writable: true\\n  });\\n\\n  /** @type {boolean} Tell if graph remain available in memory after context dispose*/\\n  this.permanent;\\n  this.setSource = function (data) {\\n    if (data) {\\n      if (!data.hasOwnProperty("$isDataObject")) {\\n        data = _data__WEBPACK_IMPORTED_MODULE_1__.$Data.build(data, this.root, this);\\n      } else {\\n        data.node = this.root;\\n      }\\n    }\\n    console.log("GRAPH SET SOUCE", data);\\n    this.source = data;\\n    return this;\\n  };\\n  this.parse = function (etype, collection, name) {\\n    this.root = new GraphNode(null, {\\n      ..._core__WEBPACK_IMPORTED_MODULE_0__.core.EntitySchema[etype],\\n      etype,\\n      collection,\\n      name\\n    }, this);\\n    return this;\\n  };\\n}\\nconst FLOW_STOP = "S";\\nfunction GraphNode(parent, schemaInfo, graph, path) {\\n  _observe__WEBPACK_IMPORTED_MODULE_2__.Observable.call(this);\\n  Object.defineProperty(this, \\\'parent\\\', {\\n    enumerable: false,\\n    writable: true,\\n    value: parent\\n  });\\n  Object.defineProperty(this, \\\'graph\\\', {\\n    enumerable: false,\\n    writable: true,\\n    value: graph\\n  });\\n  this.path = path || "root";\\n  this.isCollection;\\n  this.children = [];\\n  this.mutation = [];\\n  this.primarykey;\\n  this.identity;\\n  this.link;\\n\\n  //Questo metterlo su global in context, vale per tutti i node => oppure in Graph\\n  this.observe("*").make(_ref => {\\n    let {\\n      event,\\n      target\\n    } = _ref;\\n    if (event === "MUTATED") {\\n      this.mutation.push(target);\\n    } else if (event === "IMMUTATED") {\\n      $Array.remove(this.mutation, m => m.id === target.id);\\n    }\\n  });\\n  this.parse = function (info) {\\n    this.name = info.name;\\n    this.isCollection = info.collection;\\n    this.etype = info.etype;\\n    this.primarykey = info.primarykey || "id";\\n    this.identity = info.hasOwnProperty("identity") ? info.identity : true;\\n    const schema = _core__WEBPACK_IMPORTED_MODULE_0__.core.EntitySchema[this.etype];\\n    if (!schema) throw new Error("GraphNode PARSER: Schema not defined for Entity " + this.etype); //DEV CODE => WARNING SYSTEM\\n    this.link = Link.parse(schema.link || Link.DOWN_WISE, this);\\n    this.type = schema.type;\\n    schema.children && schema.children.forEach(info => this.children.push(new GraphNode(this, info, graph, this.path + \\\'.\\\' + info.name)));\\n    return this;\\n  };\\n  this.getChild = function (name) {\\n    return this.children ? this.children.find(child => child.name = name) : null;\\n  };\\n  this.discendant = function (path) {\\n    if (!path) return null;\\n    let n = this;\\n    path.split(\\\'.\\\').forEach(name => n = n.getChild(name));\\n    return n;\\n  };\\n\\n  /**\\r\\n   * @param {traverseCallback} callback \\r\\n   * @param {boolean} deep \\r\\n   * @param {*} source \\r\\n   * @param {*} ancestor \\r\\n   * @param {boolean} generate \\r\\n   * @returns \\r\\n   */\\n  this.traverse = function (callback, deep, source, ancestor, generate) {\\n    const stop = callback(this, source, ancestor);\\n    if (!this.children || FLOW_STOP === "S") return stop;\\n    for (let k = 0; k < this.children.length; k++) {\\n      if (generate) source[this.children[k].name] = {};\\n      if (deep) {\\n        if (source) {\\n          if (Array.isArray(source)) {\\n            for (let j = 0; j < source.length; j++) {\\n              const parent = source[j];\\n              if (!parent) continue;\\n              if (this.children[k].traverse(callback, deep, parent[this.children[k].name], parent, generate) === FLOW_STOP) break;\\n            }\\n          } else this.children[k].traverse(callback, deep, source[this.children[k].name], source, generate);\\n        } else this.children[k].traverse(callback, deep, null, source, generate);\\n      } else callback(this.children[k], source ? source[this.children[k].name] : null, source, generate);\\n    }\\n  };\\n\\n  /**\\r\\n  * @param {*} data \\r\\n  * @param {*} parent \\r\\n  * @returns \\r\\n  */\\n  this.formatData = function (data, parent, notrack) {\\n    console.log("DEBUG-NODE-FORMAT", data, parent);\\n    if (!Array.isArray(data)) data = [data];\\n    if (!data[0]) return;\\n    if (this.link.connected(data[0]) || !parent && data[0].hasOwnProperty("id")) return FLOW_STOP; // oppure id > 0\\n\\n    for (let k = 0; k < data.length; k++) {\\n      const source = data[k];\\n      if (!source) continue;\\n      if (!source.hasOwnProperty("id") && Object.isExtensible(source)) {\\n        //notrack??\\n        if (!notrack) {\\n          const metadata = new _data__WEBPACK_IMPORTED_MODULE_1__.Mutation(source, false);\\n          for (const key in _core__WEBPACK_IMPORTED_MODULE_0__.core.EntitySchema[this.etype].fields) {\\n            if (Object.hasOwnProperty.call(source, key)) {\\n              metadata.setValue(key, source[key]);\\n            }\\n          }\\n        }\\n        source.id = _data__WEBPACK_IMPORTED_MODULE_1__.$Data.entities.nextIndex(this.etype);\\n      }\\n      parent && this.link.apply(source, this, parent);\\n      console.log("DEBUG-NODE-FORMAT-SOURCE", parent, source, this.link, this);\\n    }\\n  };\\n  this.deepFormat = function (data, parent, notrack) {\\n    this.traverse((node, data, parent) => {\\n      node.formatData(data, parent, notrack);\\n    }, true, data, parent);\\n  };\\n  this.save = function () {\\n    return Apix.call(option.queryOp, data, option).then(result => {\\n      console.log("Node Save RESULT:", result);\\n      this.traverse(node => {\\n        if (result.data.mutation) {\\n          const m = result.data.mutation[node.etype];\\n          if (m) {\\n            m.forEach(el => {\\n              if (el.index < 0) {\\n                const item = node.Mutation.get(el.index);\\n                console.log("BIND-LOG-INDEX", el, item);\\n                if (item) item.id = el.id;\\n              }\\n            });\\n          }\\n        }\\n        node.Mutation.forEach(function (value, key) {\\n          console.log("BIND-LOG", value, key);\\n          if (value.__bind) {\\n            console.log("BIND-LOG-IN", value, node);\\n            const binding = value.__bind;\\n            DataGraph.setItem(value, node, binding.parent, null, value.__unshift);\\n            delete value.__bind;\\n          }\\n          delete value.__mutation;\\n        });\\n        delete node.binding;\\n        node.Mutation.clear();\\n      }, true);\\n      this.refresh();\\n      return result;\\n    }, er => {\\n      console.log("ERROR GraphNode Save", er);\\n      throw er;\\n    });\\n  };\\n  if (schemaInfo) this.parse(schemaInfo);\\n}\\nGraphNode.prototype = _observe__WEBPACK_IMPORTED_MODULE_2__.Observable.prototype;\\nconst Link = {\\n  DOWN_WISE: \\\'d\\\',\\n  UP_WISE: \\\'u\\\',\\n  BIDIRECTIONAL: \\\'b\\\',\\n  parse: function (direction, node) {\\n    if (direction === Link.DOWN_WISE) {\\n      const schema = node.parent;\\n      if (!schema) return null;\\n      //per ora non gestisco multi key\\n      return new BottomLink(schema.primarykey, schema.primarykey + schema.etype, direction);\\n    } else if (direction === Link.UP_WISE) {\\n      //per ora non gestisco multi key\\n      return new TopLink(node.primarykey, node.primarykey + node.etype, direction);\\n    } else if (direction === Link.BIDIRECTIONAL) {\\n      const pschema = node.parent;\\n      if (!pschema) return null;\\n      return new DoubleLink(pschema.etype + pschema.primarykey, node.etype + node.primarykey, direction, pschema.etype + "_" + node.etype);\\n    }\\n  }\\n};\\nfunction GraphLink(pk, fk, direction, association) {\\n  this.pk = pk;\\n  this.fk = fk;\\n  this.direction = direction;\\n  this.association = association;\\n}\\nfunction BottomLink(pk, fk, direction, association) {\\n  GraphLink.call(this, pk, fk, direction, association);\\n  /**\\r\\n   * @param {*} parent \\r\\n   * @param {*} child \\r\\n   * @param {GraphNode} node \\r\\n   */\\n  this.apply = function (child, node, parent) {\\n    //const parent = child.parent;\\n    if (!parent) return;\\n    const schema = node.parent; //node.parent.schema;\\n    const metadata = child.metadata;\\n    if (parent.id <= 0) {\\n      metadata.tempkey = {};\\n      metadata.tempkey[this.fk] = parent.id;\\n    }\\n    if (schema.identity) {\\n      child.mutate(this.fk, parent[this.pk]);\\n    } else {\\n      const keys = this.pk.split(\\\',\\\');\\n      let field;\\n      for (let k = 0; k < keys.length; k++) {\\n        field = keys[k];\\n        child.mutate(field + schema.etype, parent[field]);\\n      }\\n    }\\n    metadata.linked = true;\\n  };\\n  this.connected = function (obj) {\\n    return obj.parent && obj[this.fk] === obj.parent[this.pk];\\n  };\\n}\\nfunction TopLink(pk, fk, direction, association) {\\n  GraphLink.call(this, pk, fk, direction, association);\\n  this.apply = function (child, node, parent) {\\n    //const parent = child.parent;\\n    const metadata = child.metadata;\\n    if (child.id < 1) {\\n      metadata.tempkey = {};\\n      metadata.tempkey[this.fk] = parent.id;\\n    }\\n    if (node.identity) {\\n      parent.mutate(this.fk, child[this.pk]);\\n    } else {\\n      const keys = this.pk.split(\\\',\\\');\\n      let field;\\n      for (let k = 0; k < keys.length; k++) {\\n        field = keys[k];\\n        parent.mutate(field + node.etype, child[field]);\\n      }\\n    }\\n    metadata.linked = true;\\n  };\\n  this.connected = function (obj) {\\n    return obj.parent && obj.parent[this.fk] === obj[this.pk];\\n  };\\n}\\nfunction DoubleLink(pk, fk, direction, association) {\\n  GraphLink.call(this, pk, fk, direction, association);\\n  this.apply = function (child, node, parent) {\\n    //const parent = child.parent;\\n    const linked = {};\\n    const mutation = {};\\n    linked.tempkey = {};\\n    if (parent.id < 1) linked.tempkey[this.pk] = parent.id;\\n    mutation[this.pk] = parent.id;\\n    if (child.id < 1) linked.tempkey[this.fk] = child.id;\\n    mutation[this.fk] = child.id;\\n    linked.mutated = mutation;\\n    child.metadata.linked = linked;\\n  };\\n  this.connected = function (obj) {\\n    const linked = obj.metadata?.linked;\\n    return linked && obj.parent && linked.mutated[this.pk] === obj.parent.id && linked.mutated[this.fk] === obj.id;\\n  };\\n}\\n\\n//# sourceURL=webpack://webground/./src/graph.js?\');\n      },\n      "./src/index.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   $Array: () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_9__.$Array),\\n/* harmony export */   $Data: () => (/* reexport safe */ _data__WEBPACK_IMPORTED_MODULE_3__.$Data),\\n/* harmony export */   $String: () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_9__.$String),\\n/* harmony export */   Apix: () => (/* reexport safe */ _Apix__WEBPACK_IMPORTED_MODULE_0__.Apix),\\n/* harmony export */   DataObject: () => (/* reexport safe */ _data__WEBPACK_IMPORTED_MODULE_3__.DataObject),\\n/* harmony export */   Link: () => (/* reexport safe */ _graph__WEBPACK_IMPORTED_MODULE_6__.Link),\\n/* harmony export */   MutableObject: () => (/* reexport safe */ _data__WEBPACK_IMPORTED_MODULE_3__.MutableObject),\\n/* harmony export */   Observable: () => (/* reexport safe */ _observe__WEBPACK_IMPORTED_MODULE_8__.Observable),\\n/* harmony export */   TypeSchema: () => (/* reexport safe */ _metadata__WEBPACK_IMPORTED_MODULE_7__.TypeSchema),\\n/* harmony export */   assignIfNull: () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_9__.assignIfNull),\\n/* harmony export */   axiosChannel: () => (/* reexport safe */ _channels_AxiosChannel__WEBPACK_IMPORTED_MODULE_4__.axiosChannel),\\n/* harmony export */   context: () => (/* reexport safe */ _context__WEBPACK_IMPORTED_MODULE_2__.context),\\n/* harmony export */   core: () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_1__.core),\\n/* harmony export */   deferredAction: () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_1__.deferredAction),\\n/* harmony export */   donothing: () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_1__.donothing),\\n/* harmony export */   fetchChannel: () => (/* reexport safe */ _channels_FetchChannel__WEBPACK_IMPORTED_MODULE_5__.fetchChannel),\\n/* harmony export */   isString: () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_9__.isString),\\n/* harmony export */   localStore: () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_1__.localStore),\\n/* harmony export */   sessionStore: () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_1__.sessionStore),\\n/* harmony export */   waitAction: () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_1__.waitAction)\\n/* harmony export */ });\\n/* harmony import */ var _Apix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Apix */ "./src/Apix.js");\\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core */ "./src/core.js");\\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context */ "./src/context.js");\\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data */ "./src/data.js");\\n/* harmony import */ var _channels_AxiosChannel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./channels/AxiosChannel */ "./src/channels/AxiosChannel.js");\\n/* harmony import */ var _channels_FetchChannel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./channels/FetchChannel */ "./src/channels/FetchChannel.js");\\n/* harmony import */ var _graph__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./graph */ "./src/graph.js");\\n/* harmony import */ var _metadata__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./metadata */ "./src/metadata.js");\\n/* harmony import */ var _observe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./observe */ "./src/observe.js");\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils */ "./src/utils.js");\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n//# sourceURL=webpack://webground/./src/index.js?\');\n      },\n      "./src/metadata.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   TypeSchema: () => (/* binding */ TypeSchema)\\n/* harmony export */ });\\nvar TypeSchema = {};\\n\\n//# sourceURL=webpack://webground/./src/metadata.js?");\n      },\n      "./src/observe.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   IObservable: () => (/* binding */ IObservable),\\n/* harmony export */   Observable: () => (/* binding */ Observable),\\n/* harmony export */   Observer: () => (/* binding */ Observer)\\n/* harmony export */ });\\n/* harmony import */ var _code__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./code */ "./src/code.js");\\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core */ "./src/core.js");\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./src/utils.js");\\n\\n\\n\\nfunction Observer(key, event, parent) {\\n  this.key = key;\\n  this.event = event;\\n  this.filter;\\n  this.task; //Potrebbe sempre essere un block, ovvero se non lo è lo creo....\\n  this.rule;\\n  this.parent = parent;\\n  this.when = function (callback) {\\n    if (!this.filter) this.filter = [];\\n    this.filter.push(callback);\\n    return this;\\n  };\\n  this.target = function (target) {\\n    return this.when(info => info.target === target);\\n  };\\n  this.onEtype = function (etype) {\\n    return this.when(info => info.etype === etype);\\n  };\\n  this.onType = function (type) {\\n    return this.when(info => info.type === type);\\n  };\\n  this.withName = function (name) {\\n    return this.when(info => info.name === name);\\n  };\\n  this.onPath = function (path) {\\n    return this.when(info => info.path === path);\\n  };\\n  this.make = function (callback, prepend) {\\n    this.task = callback;\\n    if (prepend) this.input = true;\\n    return this;\\n  };\\n  this.policy = function (rule) {\\n    this.rule = rule;\\n    return this;\\n  };\\n  this.executable = function (info) {\\n    if (this.filetr) {\\n      for (let k = 0; k < this.filter.length; k++) {\\n        if (!_code__WEBPACK_IMPORTED_MODULE_0__.Task.execute(this.filter[k], info)) return false; //value\\n      }\\n    }\\n\\n    return true;\\n  };\\n  this.execute = function (info) {\\n    return this.task && this.executable() && _code__WEBPACK_IMPORTED_MODULE_0__.Task.execute(this.task, info);\\n  };\\n  this.unobserve = function () {\\n    this.parent && this.parent.unobserve(this);\\n  };\\n}\\nfunction Observable(name, etype, type) {\\n  Object.defineProperty(this, \\\'observers\\\', {\\n    enumerable: false,\\n    writable: true,\\n    value: {}\\n  });\\n  Object.defineProperty(this, \\\'type\\\', {\\n    enumerable: false,\\n    writable: true,\\n    value: type\\n  });\\n  this.name = name || "root";\\n  this.etype = etype;\\n  this.path;\\n  this.observe = function (event, key) {\\n    if (!this.observers.hasOwnProperty(event)) this.observers[event] = [];\\n    const obs = new Observer(key, event, this);\\n    this.observers[event].push(obs);\\n    return obs;\\n  };\\n\\n  /** \\r\\n   * info\\r\\n   * evt\\r\\n   * target\\r\\n   * currentTarget\\r\\n   * data\\r\\n   * emitter\\r\\n   * current\\r\\n   * obs\\r\\n   * ctx\\r\\n   * base\\r\\n  */\\n  this.emit = function (event, data, target) {\\n    target = target || this;\\n    const info = {\\n      event,\\n      data,\\n      target,\\n      emitter: this,\\n      etype: this.etype,\\n      type: this.type,\\n      name: this.name,\\n      path: this.path,\\n      context: this.context\\n    };\\n    const flow = new _code__WEBPACK_IMPORTED_MODULE_0__.Flow();\\n    if (target.control && target.control[event]) {\\n      flow.task(target.control[event], "main", target);\\n    }\\n    if (this !== target && this.control && this.control[event]) {\\n      flow.task(this.control[event], "main", this);\\n    }\\n    const constructor = function (collection, currentTarget, observable) {\\n      collection && collection.forEach(obs => {\\n        obs.executable() && (obs.rule ? obs.rule(flow, new _code__WEBPACK_IMPORTED_MODULE_0__.Block(obs.task, {\\n          key: obs.key,\\n          path: observable.path\\n        }, currentTarget), info) : flow.push(obs.task, {\\n          key: obs.key,\\n          path: observable.path\\n        }, currentTarget, obs.input));\\n      });\\n    };\\n    const build = (current, currentTarget) => {\\n      while (current) {\\n        if (current instanceof Observable) {\\n          currentTarget = currentTarget?.parent;\\n          constructor(current.observers[event], currentTarget, current);\\n          constructor(current.observers[\\\'*\\\'], currentTarget, current);\\n        }\\n        current = current.parent;\\n      }\\n    };\\n    build(this, target);\\n    build(this.context); // CTX EMIT / GLOBAL EMIT\\n\\n    flow.execute(info);\\n  };\\n  this.unobserve = function (obs) {\\n    if (obs instanceof Observer) _utils__WEBPACK_IMPORTED_MODULE_2__.$Array.remove(this.observers[obs.event], obs);\\n    //TODO: Caso elimino in base a key, ciclo tutto però potrei avere in eventi diversi chiavi uguali???\\n  };\\n\\n  this.clear = function () {\\n    this.observers = {};\\n  };\\n}\\n_core__WEBPACK_IMPORTED_MODULE_1__.core.inject(Observable, "IContext");\\nfunction IObservable() {\\n  this.observable = new Observable();\\n  this.observe = function (event) {\\n    this.observable.observe(event);\\n  };\\n  this.emit = function (event, data) {\\n    this.observable.emit(event, data, this);\\n  };\\n}\\n\\n//observe: null=> actual node, \\\'*\\\' => global (graph observer), path => node find by path\\n\\n//# sourceURL=webpack://webground/./src/observe.js?\');\n      },\n      "./src/utils.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   $Array: () => (/* binding */ $Array),\\n/* harmony export */   $String: () => (/* binding */ $String),\\n/* harmony export */   ArrayMoveElementAt: () => (/* binding */ ArrayMoveElementAt),\\n/* harmony export */   ArrayOrderElementAt: () => (/* binding */ ArrayOrderElementAt),\\n/* harmony export */   DateEnum: () => (/* binding */ DateEnum),\\n/* harmony export */   DateInterval: () => (/* binding */ DateInterval),\\n/* harmony export */   assignIfNull: () => (/* binding */ assignIfNull),\\n/* harmony export */   isString: () => (/* binding */ isString),\\n/* harmony export */   randomIntFromInterval: () => (/* binding */ randomIntFromInterval),\\n/* harmony export */   sleep: () => (/* binding */ sleep),\\n/* harmony export */   todecimal: () => (/* binding */ todecimal)\\n/* harmony export */ });\\nconst $Array = {\\n  remove: (array, p) => {\\n    const index = array.findIndex(p);\\n    if (index > -1) array.splice(index, 1);\\n    return index;\\n  },\\n  removeAt: (array, index) => {\\n    index > -1 && index < array.length && array.splice(index, 1);\\n  }\\n};\\nconst $String = {\\n  capitalize: word => word.charAt(0).toUpperCase() + word.slice(1),\\n  is: value => typeof value === \'string\'\\n};\\nfunction assignIfNull(target, source) {\\n  for (const key in source) {\\n    const field = target[key];\\n    if (field === undefined || field === null || Array.isArray(field) && field.length === 0) target[key] = source[key];\\n  }\\n}\\nfunction sleep(timeout) {\\n  return new Promise(resolve => setTimeout(resolve, timeout));\\n}\\nvar STRIP_COMMENTS = /((\\\\/\\\\/.*$)|(\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/))/mg;\\nvar ARGUMENT_NAMES = /([^\\\\s,]+)/g;\\nfunction getParamNames(func) {\\n  var fnStr = func.toString().replace(STRIP_COMMENTS, \'\');\\n  var result = fnStr.slice(fnStr.indexOf(\'(\') + 1, fnStr.indexOf(\')\')).match(ARGUMENT_NAMES);\\n  if (result === null) result = [];\\n  return result;\\n}\\nfunction randomIntFromInterval(min, max) {\\n  // min and max included \\n  return Math.floor(Math.random() * (max - min + 1) + min);\\n}\\nconst DateEnum = {\\n  day: \'Day\',\\n  week: \'WorkWeek\',\\n  month: \'Month\'\\n};\\nfunction DateInterval(format, date) {\\n  format = format || DateEnum.day;\\n  date = date || new Date();\\n  console.log(\\"DateInterval\\", format, date);\\n  date.setHours(0, 0, 0, 0);\\n  let te;\\n  if (format === DateEnum.day) {\\n    te = new Date(date);\\n    te.setDate(date.getDate() + 1);\\n    return {\\n      ts: date.toISOString().substring(0, 19),\\n      te: te.toISOString().substring(0, 19)\\n    };\\n  } else if (format === DateEnum.week) {\\n    let day = date.getDay() - 1;\\n    if (day === -1) day = 6;\\n    date.setDate(date.getDate() - day);\\n    te = new Date(date);\\n    te.setDate(date.getDate() + 6);\\n    return {\\n      ts: date.toISOString().substring(0, 19),\\n      te: te.toISOString().substring(0, 19)\\n    };\\n  } else if (format === DateEnum.month) {\\n    date.setDate(1);\\n    let day = date.getDay() - 1;\\n    if (day === -1) day = 6;\\n    date.setDate(date.getDate() - day);\\n    te = new Date(date);\\n    te.setDate(date.getDate() + 35);\\n    return {\\n      ts: date.toISOString().substring(0, 19),\\n      te: te.toISOString().substring(0, 19)\\n    };\\n  }\\n}\\nfunction isString(s) {\\n  return typeof s === \'string\';\\n}\\nfunction todecimal(value) {\\n  if (!value) return 0;\\n  var result = 0;\\n  if (value.indexOf(\\"€\\") == -1) result = Number(value.replace(/\\\\,/g, \\".\\"));else if (value[0] == \\"€\\") result = Number(value.substr(2, value.length - 2).replace(/\\\\,/g, \\".\\"));else result = Number(value.substr(0, value.length - 2).replace(/\\\\,/g, \\".\\"));\\n  return result;\\n}\\nfunction ArrayMoveElementAt(arr, fromIndex, toIndex) {\\n  const element = arr.splice(fromIndex, 1)[0];\\n  console.log(element);\\n  arr.splice(toIndex, 0, element);\\n}\\nfunction ArrayOrderElementAt(arr, fromIndex, toIndex, field) {\\n  field = field || \\"iorder\\";\\n  ArrayMoveElementAt(arr, fromIndex, toIndex);\\n  let s, e;\\n  if (fromIndex < toIndex) {\\n    s = fromIndex;\\n    e = toIndex + 1;\\n  } else {\\n    s = toIndex;\\n    e = fromIndex + 1;\\n  }\\n  for (let k = s; k < e; k++) {\\n    arr[k][field] = k + 1;\\n  }\\n}\\n\\n//# sourceURL=webpack://webground/./src/utils.js?");\n      }\n    },\n    __webpack_module_cache__ = {};\n  function __nested_webpack_require_64248__(n) {\n    var e = __webpack_module_cache__[n];\n    if (void 0 !== e) return e.exports;\n    var t = __webpack_module_cache__[n] = {\n      exports: {}\n    };\n    return __webpack_modules__[n](t, t.exports, __nested_webpack_require_64248__), t.exports;\n  }\n  __nested_webpack_require_64248__.d = (n, e) => {\n    for (var t in e) __nested_webpack_require_64248__.o(e, t) && !__nested_webpack_require_64248__.o(n, t) && Object.defineProperty(n, t, {\n      enumerable: !0,\n      get: e[t]\n    });\n  }, __nested_webpack_require_64248__.o = (n, e) => Object.prototype.hasOwnProperty.call(n, e), __nested_webpack_require_64248__.r = n => {\n    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, {\n      value: "Module"\n    }), Object.defineProperty(n, "__esModule", {\n      value: !0\n    });\n  };\n  var __nested_webpack_exports__ = __nested_webpack_require_64248__("./src/index.js");\n  return __nested_webpack_exports__;\n})());\n\n//# sourceURL=webpack://essenzaui/../core/dist/index.js?')},"../ui/dist/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('!function (e, n) {\n   true ? module.exports = n(__webpack_require__(/*! @essenza/core */ "../core/dist/index.js")) : 0;\n}(self, __WEBPACK_EXTERNAL_MODULE__essenza_core__ => (() => {\n  "use strict";\n\n  var __webpack_modules__ = {\n      "./src/index.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   Component: () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_0__.Component),\\n/* harmony export */   _jsx: () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_0__._jsx),\\n/* harmony export */   ui: () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_0__.ui)\\n/* harmony export */ });\\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui */ "./src/ui.js");\\n\\n\\n//# sourceURL=webpack://webground/./src/index.js?\');\n      },\n      "./src/ui.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   Component: () => (/* binding */ Component),\\n/* harmony export */   _jsx: () => (/* binding */ _jsx),\\n/* harmony export */   ui: () => (/* binding */ ui)\\n/* harmony export */ });\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @essenza/core */ "@essenza/core");\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_0__);\\n\\nconst _add = (parent, child) => {\\n  parent.appendChild(child?.nodeType ? child : document.createTextNode(child));\\n};\\nconst _appendChild = (parent, child) => {\\n  if (Array.isArray(child)) {\\n    child.forEach(nestedChild => appendChild(parent, nestedChild));\\n  } else {\\n    _add(parent, child);\\n  }\\n};\\nconst _jsx = (tag, props) => {\\n  const {\\n    children\\n  } = props;\\n  if (typeof tag === "function") return tag(props, children);\\n  const element = document.createElement(tag);\\n  Object.entries(props || {}).forEach(_ref => {\\n    let [name, value] = _ref;\\n    if (name.startsWith("on") && name.toLowerCase() in window) {\\n      element.addEventListener(name.toLowerCase().substr(2), value);\\n    } else if (name !== "children") {\\n      element.setAttribute(name, value);\\n    }\\n  });\\n  _appendChild(element, children);\\n  return element;\\n};\\n\\n//TODO: Per ottimizzare nei UI framework che hanno compilazione creo uno schema ui con solo i component coinvolti nel progetto!!!\\n//TODO: Per ottimizzare nei UI framework che hanno compilazione posso creare html template al posto di _jsx dinamico\\nconst ui = {\\n  elements: {},\\n  component: {\\n    modal: {\\n      build: function () {\\n        return _essenza_core__WEBPACK_IMPORTED_MODULE_0__.core.extend(Component, {\\n          $$type: "modal",\\n          $observable: {\\n            visible: false,\\n            content: null\\n          },\\n          open: function (data) {\\n            this.Content = data.content;\\n            this.Visible = true;\\n          },\\n          close: function () {\\n            this.Visible = false;\\n          },\\n          toggle: function () {\\n            this.Visible = !this.visible;\\n          }\\n        });\\n      }\\n    }\\n  },\\n  createElement: function (name, ctx) {\\n    ctx = ctx || this;\\n    if (_essenza_core__WEBPACK_IMPORTED_MODULE_0__.__DEV__) {\\n      if (!name) console.error("Cannot create an undefined UI Element");\\n    }\\n    name = name.toLowerCase();\\n    if (!ctx.elements[name]) {\\n      if (_essenza_core__WEBPACK_IMPORTED_MODULE_0__.__DEV__) {\\n        if (!this.component.hasOwnProperty(name)) console.error(name + " is not an essenza UI Element");\\n      }\\n      ctx.elements[name] = this.component[name].build();\\n    }\\n    return new this.elements[name]();\\n  }\\n\\n  //unregister per vista?\\n};\\n\\nfunction Component() {\\n  _essenza_core__WEBPACK_IMPORTED_MODULE_0__.MutableObject.call(this);\\n  //do nothing actually, \\n  //a base class for all components \\n}\\n\\nComponent.prototype = Object.create(_essenza_core__WEBPACK_IMPORTED_MODULE_0__.MutableObject.prototype);\\nObject.defineProperty(Component.prototype, "control", {\\n  get: function () {\\n    return ui.component[this.$$type].control;\\n  }\\n});\\n_essenza_core__WEBPACK_IMPORTED_MODULE_0__.core.inject(Component, "IContext");\\nwindow.useElement = function (target) {\\n  return _essenza_core__WEBPACK_IMPORTED_MODULE_0__.$String.is(target) ? document.getElementById(target).$component : target.$component;\\n};\\n\\n/*{\\r\\n    $constructor: function (a,b) { //Constructor\\r\\n        Component.call(this, a);\\r\\n        //qui istanzio prop della classe\\r\\n        this.b = b;\\r\\n        this.prop = value;\\r\\n        Object.defineProperties({ _control: { enumerable: false } })\\r\\n    },\\r\\n\\r\\n    $$type: "modal",\\r\\n\\r\\n    $observable: { visible: false, content: null }, //Add default value to prototype\\r\\n\\r\\n    $properties: { control: { get: () => ui.component.modal.control } },\\r\\n\\r\\n    $inject: "IContext", //prorotype\\r\\n\\r\\n    open: function (content) {\\r\\n        this.Content = content;\\r\\n        this.Visible = true;\\r\\n    },\\r\\n\\r\\n    close: function () {\\r\\n        this.Visible = false;\\r\\n    },\\r\\n\\r\\n    toggle: function () {\\r\\n        this.Visible = !this.visible;\\r\\n    }\\r\\n}*/\\n\\n//# sourceURL=webpack://webground/./src/ui.js?\');\n      },\n      "@essenza/core": e => {\n        e.exports = __WEBPACK_EXTERNAL_MODULE__essenza_core__;\n      }\n    },\n    __webpack_module_cache__ = {};\n  function __nested_webpack_require_5874__(e) {\n    var n = __webpack_module_cache__[e];\n    if (void 0 !== n) return n.exports;\n    var _ = __webpack_module_cache__[e] = {\n      exports: {}\n    };\n    return __webpack_modules__[e](_, _.exports, __nested_webpack_require_5874__), _.exports;\n  }\n  __nested_webpack_require_5874__.n = e => {\n    var n = e && e.__esModule ? () => e.default : () => e;\n    return __nested_webpack_require_5874__.d(n, {\n      a: n\n    }), n;\n  }, __nested_webpack_require_5874__.d = (e, n) => {\n    for (var _ in n) __nested_webpack_require_5874__.o(n, _) && !__nested_webpack_require_5874__.o(e, _) && Object.defineProperty(e, _, {\n      enumerable: !0,\n      get: n[_]\n    });\n  }, __nested_webpack_require_5874__.o = (e, n) => Object.prototype.hasOwnProperty.call(e, n), __nested_webpack_require_5874__.r = e => {\n    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: "Module"\n    }), Object.defineProperty(e, "__esModule", {\n      value: !0\n    });\n  };\n  var __nested_webpack_exports__ = __nested_webpack_require_5874__("./src/index.js");\n  return __nested_webpack_exports__;\n})());\n\n//# sourceURL=webpack://essenzaui/../ui/dist/index.js?')},"../web/dist/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('!function (e, n) {\n   true ? module.exports = n(__webpack_require__(/*! @essenza/core */ "../core/dist/index.js")) : 0;\n}(self, __WEBPACK_EXTERNAL_MODULE__essenza_core__ => (() => {\n  "use strict";\n\n  var __webpack_modules__ = {\n      "./src/context.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   webControl: () => (/* binding */ webControl),\\n/* harmony export */   webcontext: () => (/* binding */ webcontext)\\n/* harmony export */ });\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @essenza/core */ "@essenza/core");\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session */ "./src/session.js");\\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user */ "./src/user.js");\\n//import { core } from "./core";\\n\\n\\n\\nfunction webControl() {}\\nconst webcontext = function () {\\n  _essenza_core__WEBPACK_IMPORTED_MODULE_0__.context.call(this);\\n  this.objects = [];\\n  this.elements = {};\\n  this.setControl(this, webControl);\\n};\\n_essenza_core__WEBPACK_IMPORTED_MODULE_0__.core.prototypeOf(_essenza_core__WEBPACK_IMPORTED_MODULE_0__.context, webcontext, {\\n  register: function (wo) {\\n    //, injection) {\\n    this.objects.push(wo);\\n    //injection && core.inject(null, injection);\\n    //wo.context = this; // Siamo sicuri??\\n  },\\n\\n  build: function (core) {\\n    Object.defineProperty(webcontext.prototype, "document", {\\n      get: function () {\\n        return core.document;\\n      }\\n    });\\n    Object.defineProperty(webcontext.prototype, "core", {\\n      get: function () {\\n        return core;\\n      }\\n    });\\n    core.inject(webcontext, "IApi");\\n    this.logged = core.getCookie(\\\'wgsession_\\\'); //use cookie Api\\n    console.log("CTX LOGGED", this.logged);\\n    this.session = (0,_session__WEBPACK_IMPORTED_MODULE_1__.useSession)(this);\\n    this.user = (0,_user__WEBPACK_IMPORTED_MODULE_2__.useUser)(this);\\n    const instance = this;\\n    //session Active/Complete sia onReady che document.load )> \\n    core.document.oncontent(function () {\\n      //ui.init();\\n\\n      if (!instance.initialized) {\\n        //instance.session.contentReady(); //Mi assicuro di eliminare task, così anche se lo richiama ctx non eseguo di nuovo!\\n        instance.init();\\n      }\\n    });\\n  },\\n  init: function () {\\n    if (!this.initialized) {\\n      this.initialized = true;\\n      const instance = this;\\n      const sync = [];\\n      const ready = function (warning) {\\n        if (!document.body) {\\n          return setTimeout(ready, 13, warning);\\n        }\\n        for (let k = 0; k < instance.objects.length; k++) {\\n          instance.objects[k].onready(instance, warning); //Session chiamerà prima onContent (se già eseguita non ci son più task)\\n        }\\n      };\\n\\n      const onReady = function (warning) {\\n        console.log("CTX ON READY");\\n        warning = warning || false;\\n        document.onreadystatechange = () => {\\n          if (document.readyState === \\\'complete\\\') {\\n            ready(warning);\\n          }\\n        };\\n        if (document.readyState === \\\'complete\\\') {\\n          ready(warning);\\n        }\\n      };\\n      this.document.onunload(evt => {\\n        //Event wg unload can be call more time on some os architecture, TODO: handle in webground\\n        instance.backup();\\n      });\\n      for (let k = 0; k < this.objects.length; k++) {\\n        const wo = this.objects[k];\\n        wo.init(this);\\n        if (!wo.local && wo.syncronize) sync.push(wo.etype);\\n      }\\n      if (sync.length > 0) {\\n        this.api.call("wg_sync", sync.join(\\\',\\\')).then(v => {\\n          this.setData(v);\\n          onReady();\\n        });\\n      } else {\\n        onReady();\\n      }\\n    }\\n  },\\n  backup: function () {\\n    for (let k = 0; k < this.objects.length; k++) {\\n      this.objects[k].backup();\\n    }\\n  },\\n  setData: function (data) {\\n    let wo;\\n    for (let k = 0; k < this.objects.length; k++) {\\n      wo = this.objects[k];\\n      if (data.hasOwnProperty(wo.etype)) wo.absorb(data[wo.etype]);\\n    }\\n  }\\n});\\n\\n//# sourceURL=webpack://essenza/./src/context.js?\');\n      },\n      "./src/index.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   webInit: () => (/* binding */ webInit),\\n/* harmony export */   webObject: () => (/* reexport safe */ _webobject__WEBPACK_IMPORTED_MODULE_4__.webObject)\\n/* harmony export */ });\\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./context */ "./src/context.js");\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @essenza/core */ "@essenza/core");\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./session */ "./src/session.js");\\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./user */ "./src/user.js");\\n/* harmony import */ var _webobject__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webobject */ "./src/webobject.js");\\n\\n\\n\\n\\nfunction webInit() {\\n  _essenza_core__WEBPACK_IMPORTED_MODULE_1__.TypeSchema.session = {\\n    fields: {},\\n    type: _session__WEBPACK_IMPORTED_MODULE_2__.Session,\\n    children: []\\n  }, _essenza_core__WEBPACK_IMPORTED_MODULE_1__.TypeSchema.user = {\\n    fields: {\\n      id: true,\\n      name: true,\\n      surname: true,\\n      email: true,\\n      password: true,\\n      itype: true,\\n      address: true,\\n      phone: true,\\n      username: true,\\n      nusername: true,\\n      nemail: true,\\n      emailvalid: true,\\n      phonevalid: true,\\n      twofactor: true,\\n      cf: true,\\n      vatnumber: true,\\n      portfolio: true,\\n      image: true,\\n      website: true,\\n      mkt: true,\\n      locked: true,\\n      dlog: true,\\n      dlast: true,\\n      businessname: true,\\n      bsite: true,\\n      businessarea: true,\\n      logo: true,\\n      street: true,\\n      num: true,\\n      locality: true,\\n      code: true,\\n      city: true,\\n      affiliate: true\\n    },\\n    type: _user__WEBPACK_IMPORTED_MODULE_3__.User,\\n    children: [{\\n      name: "cart",\\n      etype: "cartitem",\\n      collection: true,\\n      link: _essenza_core__WEBPACK_IMPORTED_MODULE_1__.Link.DOWN_WISE\\n    }]\\n  }, _essenza_core__WEBPACK_IMPORTED_MODULE_1__.TypeSchema.cart = {\\n    //table: "CartTable", => optional\\n    //type: \\n    fields: {},\\n    children: [{\\n      name: "items",\\n      etype: "cartitem",\\n      collection: true,\\n      link: _essenza_core__WEBPACK_IMPORTED_MODULE_1__.Link.DOWN_WISE\\n    }]\\n  }, _essenza_core__WEBPACK_IMPORTED_MODULE_1__.TypeSchema.cartitem = {\\n    fields: {\\n      id: true,\\n      title: true,\\n      quantity: true,\\n      productid: true\\n    }\\n  }, _essenza_core__WEBPACK_IMPORTED_MODULE_1__.core.EntitySchema = window.hasOwnProperty(\\\'$wgschema\\\') ? $wgschema(_essenza_core__WEBPACK_IMPORTED_MODULE_1__.TypeSchema) : _essenza_core__WEBPACK_IMPORTED_MODULE_1__.TypeSchema;\\n  _essenza_core__WEBPACK_IMPORTED_MODULE_1__.$Data.buildSchema(_essenza_core__WEBPACK_IMPORTED_MODULE_1__.core.EntitySchema);\\n  _essenza_core__WEBPACK_IMPORTED_MODULE_1__.core.build(new _context__WEBPACK_IMPORTED_MODULE_0__.webcontext());\\n  window.$es = _essenza_core__WEBPACK_IMPORTED_MODULE_1__.core.context;\\n}\\n\\n//webInit();\\n\\n\\n//export { core, Observable, waitAction, deferredAction, DataObject } from "@essenza/core"\\n\\n//# sourceURL=webpack://essenza/./src/index.js?\');\n      },\n      "./src/session.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   Session: () => (/* binding */ Session),\\n/* harmony export */   breakPoint: () => (/* binding */ breakPoint),\\n/* harmony export */   mediaEnum: () => (/* binding */ mediaEnum),\\n/* harmony export */   useSession: () => (/* binding */ useSession),\\n/* harmony export */   userEnum: () => (/* binding */ userEnum)\\n/* harmony export */ });\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @essenza/core */ "@essenza/core");\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _webobject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webobject */ "./src/webobject.js");\\n\\n\\nconst VERSION = "1.0";\\nconst userEnum = {\\n  GUEST: "0"\\n};\\nconst mediaEnum = {\\n  MOBILE: "0",\\n  TABLET: "1",\\n  DESKTOP: "2"\\n};\\nconst breakPoint = {\\n  xs: 0,\\n  sm: 576,\\n  md: 768,\\n  lg: 992,\\n  xl: 1200,\\n  xxl: 1400\\n};\\n\\n//export const session = new webObject("session", sessionStore, { local: true, language: \\\'it\\\', timeout: 1800, store: sessionStore });\\n\\nfunction Session() {\\n  _webobject__WEBPACK_IMPORTED_MODULE_1__.webObject.call(this, "session", _essenza_core__WEBPACK_IMPORTED_MODULE_0__.sessionStore);\\n  Object.defineProperty(this, \\\'readyAction\\\', {\\n    enumerable: false,\\n    writable: true,\\n    value: []\\n  });\\n  Object.defineProperty(this, \\\'completeAction\\\', {\\n    enumerable: false,\\n    writable: true,\\n    value: []\\n  });\\n  this.local = true;\\n  this.oninit = function (ctx) {\\n    console.log("SESSION INIT");\\n    this.defaultValues({\\n      language: \\\'it\\\',\\n      timeout: 1800\\n    });\\n    Object.defineProperty(this, \\\'context\\\', {\\n      enumerable: false,\\n      value: ctx\\n    });\\n    //TODO:Logica Polyfill\\n    //this.polyfilled = true;\\n\\n    //const data = instance.data;\\n\\n    if (!this.restored) {\\n      if (navigator) {\\n        this.locale = navigator.languages && navigator.languages.length ? navigator.languages[0] : navigator.language;\\n      } else this.locale = option.language || \\\'it\\\';\\n    }\\n\\n    //Check Version se non è aggiornata forzo sync perchè user stored potrebbe essere non compatibile con nuova versione.\\n    //const version = localStorage.getItem("version_");\\n\\n    if (VERSION != this.version) {\\n      this.syncronize |= this.version ? true : false;\\n      this.version = VERSION;\\n    }\\n    const last = this.time;\\n    this.time = Math.floor(Date.now() / 1000);\\n    if (!last || this.time - last > this.timeout) {\\n      this.syncronize = true; //Sessione Scaduta o nuova\\n    }\\n\\n    this.logged = ctx.logged;\\n\\n    //TODO: session resize, mettere in core o in ctx???\\n    /*if (this.syncronize)\\r\\n        this.onresize.executeNow();\\r\\n      window.onresize = function (e) {\\r\\n        this.onresize.execute();\\r\\n    }*/\\n\\n    ctx.document.onload(() => {\\n      this.loaded = true;\\n      this.oncomplete();\\n    });\\n\\n    //this.backup();\\n  };\\n\\n  this.ready = function (fn) {\\n    this.isready ? fn(this.context) : this.readyAction.push(fn);\\n  };\\n  this.complete = function (fn) {\\n    this.completed ? fn(this.context) : this.completeAction.push(fn);\\n  };\\n  this.onready = function (ctx, warning) {\\n    this.isready = true;\\n    this.readyAction.forEach(fn => fn(ctx, warning));\\n    //delete this.readyAction;\\n    this.oncomplete(ctx, warning);\\n  };\\n  this.oncomplete = function (ctx, warning) {\\n    if (this.isready && this.loaded) {\\n      this.completed = true;\\n      this.completeAction.forEach(fn => fn(ctx, warning));\\n      //delete this.readyAction, this.completeAction;\\n    }\\n  };\\n\\n  this.resize = function () {\\n    const info = this.data;\\n    console.log("RESIZE", this);\\n    info.width = document.documentElement.clientWidth;\\n    info.height = document.documentElement.clientHeight;\\n    let breakpoint = info.breakpoint;\\n    let media = info.media;\\n    if (info.width < breakPoint.md) {\\n      info.media = mediaEnum.MOBILE;\\n      info.width < breakPoint.sm ? info.breakpoint = breakPoint.xs : info.breakpoint = breakPoint.sm;\\n    } else if (info.width > breakPoint.xl) {\\n      info.media = mediaEnum.DESKTOP;\\n      info.width > breakPoint.xxl ? info.breakpoint = breakPoint.xxl : info.breakpoint = breakPoint.xl;\\n    } else {\\n      info.media = mediaEnum.TABLET;\\n      info.breakpoint = breakPoint.xxl;\\n    }\\n    media = media && media !== info.media; //|| info.media; //Anche la prima volta (new session) o no???\\n    breakpoint = breakpoint && breakpoint !== info.breakpoint; //|| info.breakpoint;\\n\\n    if (this.onbreakpoint && (media || breakpoint)) this.onbreakpoint(info, info.media, info.breakpoint);\\n  };\\n  this.onresize = new _essenza_core__WEBPACK_IMPORTED_MODULE_0__.waitAction(this.resize.bind(this));\\n}\\nSession.prototype = _webobject__WEBPACK_IMPORTED_MODULE_1__.webObject.prototype;\\n/** \\r\\n * @param {webcontext} ctx optional: override default session config only for the lifecycle of page \\r\\n * @returns \\r\\n */\\nconst useSession = function (ctx) {\\n  const session = new Session();\\n  ctx.register(session);\\n  return session;\\n};\\n\\n//# sourceURL=webpack://essenza/./src/session.js?\');\n      },\n      "./src/user.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   CartControl: () => (/* binding */ CartControl),\\n/* harmony export */   User: () => (/* binding */ User),\\n/* harmony export */   useUser: () => (/* binding */ useUser)\\n/* harmony export */ });\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @essenza/core */ "@essenza/core");\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _webobject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webobject */ "./src/webobject.js");\\n\\n\\n\\n/*export function UserControl(ctx) {\\r\\n    this.init = function (context, user) {\\r\\n        context.observe("LOGIN").make(({ context, data }) => {\\r\\n            console.log("LOGIN OBS ON CART", context, data);\\r\\n            user.control = data ? context.getControl(Logged) : context.getControl(Guest);\\r\\n            user.skip = data;\\r\\n        }).execute({ context: context, data: context.logged });\\r\\n    }\\r\\n}*/\\n\\nfunction CartControl(ctx) {\\n  this.init = function (ctx, cart) {\\n    ctx.observe("LOGIN").make(_ref => {\\n      let {\\n        context,\\n        data,\\n        target\\n      } = _ref;\\n      console.log("LOGIN OBS ON CART", context, data);\\n      target.control = data ? context.getControl(Logged) : context.getControl(Guest);\\n      //ctx.user.skip = data;\\n    }).execute({\\n      context: ctx,\\n      data: ctx.logged,\\n      target: cart\\n    });\\n  };\\n}\\n\\n//CONTROL DEVE POTER SPECIFICARE TYPE DELL\\\'EMITTER\\nfunction Logged() {\\n  CartControl.call(this);\\n  //TASK DEL TARGET\\n  this.CART_ADD = (info, data) => {\\n    console.log("CART LOGGED ADD", info, data);\\n  };\\n  this.CART_UPDATE = (info, data) => {\\n    console.log("CART LOGGED UPDATE", info, data);\\n  };\\n  this.CART_REMOVE = (info, data) => {\\n    console.log("CART LOGGED REMOVE", info, data);\\n  };\\n}\\nfunction Guest() {\\n  CartControl.call(this);\\n  this.CART_ADD = (info, cart) => {\\n    cart.items.push(info.data);\\n    console.log("CART GUEST ADD", info, cart);\\n  };\\n  this.CART_UPDATE = (info, cart) => {\\n    const {\\n      item,\\n      values\\n    } = info.data;\\n    Object.assign(item, values);\\n    console.log("CART GUEST UPDATE", info, cart, item, values);\\n  };\\n  this.CART_REMOVE = (info, data) => {\\n    console.log("CART GUEST REMOVE", info, data);\\n  };\\n}\\nfunction User() {\\n  _webobject__WEBPACK_IMPORTED_MODULE_1__.webObject.call(this, "user", _essenza_core__WEBPACK_IMPORTED_MODULE_0__.localStore);\\n  this.oninit = function (ctx) {\\n    console.log("USER ON-INIT", ctx);\\n    //ctx.setControl(this, CartControl).init(ctx, this);\\n  };\\n}\\n\\nUser.prototype = _webobject__WEBPACK_IMPORTED_MODULE_1__.webObject.prototype;\\n\\n//Cambiare comportamento della classe anche a seconda dello stato...compatibile con concetto di block (riutillizare codice);\\n\\nfunction Cart() {\\n  _essenza_core__WEBPACK_IMPORTED_MODULE_0__.Observable.call(this);\\n  Object.defineProperty(this, "items", {\\n    get: function () {\\n      return this.context.user.Cart;\\n    }\\n  });\\n  this.context.setControl(this, CartControl).init(this.context, this);\\n  this.check = function (item) {\\n    return item.hasOwnProperty(this.IField); // && item.hasOwnProperty("quantity");\\n  };\\n\\n  this.find = function (id) {\\n    return this.items.find(item => item[this.IField] === id);\\n  };\\n  this.findIndex = function (id) {\\n    return this.items.findIndex(item => item[this.IField] === id);\\n  };\\n  this.add = function (item, skip) {\\n    if (!item[this.QField]) item[this.QField] = 1;\\n    if (skip || !this.find(item[this.IField])) this.emit("CART_ADD", item);\\n  };\\n  this.update = function (data, insert) {\\n    if (this.check(data)) {\\n      const item = this.find(data[this.IField]);\\n      if (!item) insert && this.add(data, true);else {\\n        if (!data.absolute) data[this.QField] = Math.max(item[this.QField] + (data[this.QField] || 0), 0);\\n        data[this.QField] > 0 ? this.emit("CART_UPDATE", {\\n          item: item,\\n          values: data\\n        }) : this.emit("CART_REMOVE", item);\\n      }\\n    }\\n  };\\n  this.remove = function (item) {\\n    this.check(item) && this.emit("CART_REMOVE", this.findIndex(item[this.IField]));\\n  };\\n  this.clear = function () {};\\n  this.lenght = function () {\\n    this.items ? this.items.lenght : 0;\\n  };\\n}\\nCart.prototype = _essenza_core__WEBPACK_IMPORTED_MODULE_0__.Observable.prototype;\\nCart.prototype.QField = "quantity";\\nCart.prototype.IField = "productid";\\nconst useUser = function (ctx) {\\n  ctx.user = new User();\\n  ctx.register(ctx.user);\\n  return ctx.user;\\n};\\nwindow.useCart = function () {\\n  return new Cart();\\n};\\n\\n//LOGGED - CART - MODEL - CTX ISTANCE -\\n\\n//# sourceURL=webpack://essenza/./src/user.js?\');\n      },\n      "./src/webobject.js": (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n        eval(\'__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   webObject: () => (/* binding */ webObject)\\n/* harmony export */ });\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @essenza/core */ "@essenza/core");\\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_0__);\\n\\n\\n/**\\r\\n * @param {string} etype string key of object, used to store object.\\r\\n * @param {Decorator} decorator \\r\\n * @param {object} option \\r\\n */\\nfunction webObject(etype, store, info) {\\n  _essenza_core__WEBPACK_IMPORTED_MODULE_0__.DataObject.call(this, etype);\\n  this.etype = etype;\\n  Object.defineProperty(this, \\\'store\\\', {\\n    enumerable: false,\\n    value: store || {\\n      save: _essenza_core__WEBPACK_IMPORTED_MODULE_0__.donothing,\\n      getData: _essenza_core__WEBPACK_IMPORTED_MODULE_0__.donothing\\n    }\\n  });\\n  //this.store = store || { save: donothing, getData: donothing };\\n  this.initialized = false;\\n  this.local = false;\\n  this.syncronize = false;\\n  this.skip;\\n  this.init = function (ctx) {\\n    if (!this.initialized) {\\n      console.log("INIT " + this.etype);\\n      if (this.beforeInit) this.beforeInit(ctx);\\n      this.restore(true);\\n      console.log("RESTORED DATA", this.state);\\n      if (!this.restored) {\\n        this.data = {};\\n        this.syncronize = true;\\n      }\\n      console.log("CHECK FOR SYNC");\\n      //Richiesta precedente al Load Attuale (Es. link a nuova pagina che forza sync)\\n      if (sessionStorage.getItem("sync_" + this.etype)) {\\n        this.syncronize = true;\\n        sessionStorage.removeItem("sync_" + this.etype);\\n      }\\n      this.initialized = true;\\n      if (this.oninit) this.oninit(ctx);\\n    }\\n  };\\n\\n  /*this.toJSON = function () {\\r\\n      return JSON.stringify(this);\\r\\n  };*/\\n\\n  this.absorb = function (info, preserve) {\\n    preserve ? (0,_essenza_core__WEBPACK_IMPORTED_MODULE_0__.assignIfNull)(this, info) : Object.assign(this, info);\\n  };\\n  this.defaultValues = function (info) {\\n    this.absorb(info, true);\\n  };\\n  this.backup = function (syncronize) {\\n    !this.skip && this.store.save(this);\\n    syncronize && !this.local && this.save();\\n  };\\n  this.restore = function (preserve) {\\n    const backup = this.store.getData(this);\\n    this.absorb(backup, preserve);\\n    this.restored = backup !== null;\\n  };\\n  this.clear = function () {\\n    this.store.clear(this);\\n  };\\n\\n  /**\\r\\n   * Syncronize object data with remote source\\r\\n   * @param {*} data \\r\\n   * @returns \\r\\n   */\\n  this.sync = function () {\\n    //TODO: aggiungere caso local??\\n    return this.api.call("api/wo_sync", {\\n      etype: this.etype\\n    }).then(v => {\\n      this.absorb(v);\\n    });\\n  };\\n  this.syncOnNextLoad = function () {\\n    sessionStorage.setItem("sync_" + this.etype, "Y");\\n  };\\n  this.onready = _essenza_core__WEBPACK_IMPORTED_MODULE_0__.donothing;\\n  this.absorb(info);\\n}\\nwebObject.prototype = _essenza_core__WEBPACK_IMPORTED_MODULE_0__.DataObject.prototype;\\n_essenza_core__WEBPACK_IMPORTED_MODULE_0__.core.inject(webObject, "IApi");\\n\\n//# sourceURL=webpack://essenza/./src/webobject.js?\');\n      },\n      "@essenza/core": e => {\n        e.exports = __WEBPACK_EXTERNAL_MODULE__essenza_core__;\n      }\n    },\n    __webpack_module_cache__ = {};\n  function __nested_webpack_require_22462__(e) {\n    var n = __webpack_module_cache__[e];\n    if (void 0 !== n) return n.exports;\n    var t = __webpack_module_cache__[e] = {\n      exports: {}\n    };\n    return __webpack_modules__[e](t, t.exports, __nested_webpack_require_22462__), t.exports;\n  }\n  __nested_webpack_require_22462__.n = e => {\n    var n = e && e.__esModule ? () => e.default : () => e;\n    return __nested_webpack_require_22462__.d(n, {\n      a: n\n    }), n;\n  }, __nested_webpack_require_22462__.d = (e, n) => {\n    for (var t in n) __nested_webpack_require_22462__.o(n, t) && !__nested_webpack_require_22462__.o(e, t) && Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: n[t]\n    });\n  }, __nested_webpack_require_22462__.o = (e, n) => Object.prototype.hasOwnProperty.call(e, n), __nested_webpack_require_22462__.r = e => {\n    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: "Module"\n    }), Object.defineProperty(e, "__esModule", {\n      value: !0\n    });\n  };\n  var __nested_webpack_exports__ = __nested_webpack_require_22462__("./src/index.js");\n  return __nested_webpack_exports__;\n})());\n\n//# sourceURL=webpack://essenzaui/../web/dist/index.js?')},"./src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useElement: () => (/* reexport safe */ _webui__WEBPACK_IMPORTED_MODULE_3__.useElement)\n/* harmony export */ });\n/* harmony import */ var _essenza_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @essenza/ui */ "../ui/dist/index.js");\n/* harmony import */ var _essenza_ui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_essenza_ui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @essenza/core */ "../core/dist/index.js");\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _essenza_web__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @essenza/web */ "../web/dist/index.js");\n/* harmony import */ var _essenza_web__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_essenza_web__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _webui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./webui */ "./src/webui.js");\n\n\n\n(0,_essenza_web__WEBPACK_IMPORTED_MODULE_2__.webInit)();\n_essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.taskClass = "es-task";\n_essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.elementClass = "es-element";\nwindow.$es = _essenza_core__WEBPACK_IMPORTED_MODULE_1__.core.context;\n_essenza_core__WEBPACK_IMPORTED_MODULE_1__.core.document.oncontent(function () {\n  function initElement(elements) {\n    for (let el of elements) {\n      const data = el.dataset;\n      let schema;\n      if (!data || !data.hasOwnProperty("type") || !(schema = _essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.component[data.type])) continue;\n      if (el.id === "") el.id = "$" + data.type;\n      let parts = {};\n      schema.init(el, data, parts, _essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.createElement(data.type));\n    }\n  }\n  function attachEvent(tasks) {\n    for (let el of tasks) el.onclick = () => {\n      const data = el.dataset;\n      const target = document.getElementById(data.target).$component;\n      target[data.intent](data);\n      target.emit(data.intent, data);\n      //se target undefined => è un task global => tramite CTX EMIT\n      //ctx.emit(data.intent, data);\n    };\n  }\n\n  attachEvent(document.getElementsByClassName(_essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.taskClass));\n  initElement(document.getElementsByClassName(_essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.elementClass));\n});\n\n\n/*init: function () {\r\n    this.attachEvent(document.getElementsByClassName(this.taskClass));\r\n    this.initElement(document.getElementsByClassName(this.elementClass));\r\n},*/\n\n//# sourceURL=webpack://essenzaui/./src/index.js?')},"./src/webui.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useElement: () => (/* binding */ useElement)\n/* harmony export */ });\n/* harmony import */ var _essenza_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @essenza/ui */ "../ui/dist/index.js");\n/* harmony import */ var _essenza_ui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_essenza_ui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @essenza/core */ "../core/dist/index.js");\n/* harmony import */ var _essenza_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_essenza_core__WEBPACK_IMPORTED_MODULE_1__);\n\n\n_essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.component.modal.parts = {\n  //skin, layout\n  overlay: o => (0,_essenza_ui__WEBPACK_IMPORTED_MODULE_0__._jsx)("div", {\n    class: "fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"\n  }, o),\n  container: o => (0,_essenza_ui__WEBPACK_IMPORTED_MODULE_0__._jsx)("div", {\n    class: "fixed inset-0 z-10 overflow-y-auto",\n    children: (0,_essenza_ui__WEBPACK_IMPORTED_MODULE_0__._jsx)("div", {\n      class: "flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"\n    })\n  }, o)\n};\n_essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.component.modal.init = function (target, data, parts, component) {\n  parts = parts || {};\n  for (const key in this.parts) {\n    if (!Object.hasOwnProperty.call(parts, key)) {\n      parts[key] = this.parts[key]();\n    }\n    target.appendChild(parts[key]);\n  }\n  parts.container = parts.container.firstElementChild;\n  target.$component = component;\n  component.root = target;\n  component.parts = parts;\n};\n_essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.component.modal.control = {\n  //TOBE: defined in \n  MUTATING: _ref => {\n    let {\n      data,\n      target\n    } = _ref;\n    if (data.field === "content") {\n      let content = data.value;\n      if (_essenza_core__WEBPACK_IMPORTED_MODULE_1__.$String.is(content)) content = document.getElementById(content);\n      if (!content) return; //Oppure metto quello di default se è null e retun se undefined...\n\n      if (content.nodeName === "TEMPLATE") {\n        content = content.content.cloneNode(true);\n        _essenza_ui__WEBPACK_IMPORTED_MODULE_0__.ui.attachEvent(content.querySelectorAll(".es-task"));\n      }\n      const parts = target.parts;\n      const child = parts.container.firstElementChild;\n      child && child.remove();\n      parts.container.appendChild(content);\n    } else if (data.field === "visible") {\n      data.value ? target.root.classList.remove("hidden") : target.root.classList.add("hidden");\n    }\n  }\n};\nconst useElement = function (target) {\n  return _essenza_core__WEBPACK_IMPORTED_MODULE_1__.$String.is(target) ? document.getElementById(target).$component : target.$component;\n};\n\n//# sourceURL=webpack://essenzaui/./src/webui.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/index.js");essenzaui=__webpack_exports__})();